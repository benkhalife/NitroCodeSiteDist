import{_ as R,r as m,h as g,b as N,i as U,w as z,s as F,c as a,o as n,d as t,y as b,f as h,t as d,a as A,m as v,z as H,A as w,F as S,g as M,B as O,j as Y}from"./index-BmHdRr6z.js";import{P as G}from"./API-g1pkoZgJ.js";const J={class:"min-h-screen bg-gray-50"},K={class:"container mx-auto p-1 sm:px-4 py-4 sm:py-8 max-w-4xl"},Q={"aria-label":"Breadcrumb",class:"breadcrumbs text-primary text-sm mt-4 pr-4",dir:"rtl"},W={itemscope:"",itemtype:"https://schema.org/BreadcrumbList"},X={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem",class:"text-gray-700"},Z={itemprop:"name"},ee={key:0,class:"bg-white rounded-xl shadow-md overflow-hidden"},te={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg"},se={class:"flex items-center"},oe={class:"text-red-700"},le={key:2,class:"bg-white rounded-xl shadow-md overflow-hidden"},ae={class:"relative"},ne=["src","alt"],re={class:"absolute bottom-0 left-0 right-0 p-2 sm:p-6 text-white"},ie={class:"text-xl sm:text-2xl md:text-3xl font-bold mb-2"},de={class:"flex flex-wrap gap-4 text-sm"},ue={class:"flex items-center gap-1"},me={class:"flex items-center gap-1"},ce={class:"p-2 sm:p-6 md:p-8"},pe=["innerHTML"],ve={class:"mt-10 pt-6 border-t border-gray-200 flex flex-col sm:flex-row justify-between gap-4"},fe={class:"mt-12"},ge={class:"bg-white rounded-xl shadow-md p-6 mb-8"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},xe={class:"mb-4"},ye={key:0,class:"space-y-6"},he={class:"flex justify-between items-start mb-3"},we={class:"flex items-center"},_e={class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold"},ke={class:"mr-3"},Le={class:"font-semibold text-gray-800"},Pe={class:"text-gray-500 text-sm"},Ee={class:"flex items-center text-yellow-400"},Ie={class:"text-gray-700"},Se={key:1,class:"bg-gray-100 rounded-xl p-8 text-center"},Me={__name:"PostView",setup(Te){const x=U(),T=Y(),r=m([]),l=m(null),y=m(!1),c=m(null),_=m(!1),i=m({name:"",email:"",text:""}),f=m([]),C=async()=>{try{const e=await(await fetch("https://api.nitrocode.ir/site/posts/list")).json();e.ok&&e.list&&(r.value=e.list.data)}catch(s){console.error("خطا در دریافت لیست پست‌ها:",s)}},k=async s=>{y.value=!0,c.value=null;try{const e=await G(`site/post/${s}`);e.ok&&e.post?(l.value=e.post,V(e.post)):c.value="پست مورد نظر یافت نشد"}catch(e){c.value="خطا در دریافت اطلاعات پست",console.error(e)}finally{y.value=!1}},V=s=>{document.title=`${s.title} | نیترو کد`;const e=s.meta_description||s.small_description,o=s.meta_keywords||"برنامه نویسی, توسعه بازی, آموزش";let u=document.querySelector('meta[name="description"]');u||(u=document.createElement("meta"),u.name="description",document.head.appendChild(u)),u.content=e;let p=document.querySelector('meta[name="keywords"]');p||(p=document.createElement("meta"),p.name="keywords",document.head.appendChild(p)),p.content=o},j=g(()=>{if(!l.value)return 0;const s=l.value.description.replace(/<[^>]*>/g,""),e=200,o=s.trim().split(/\s+/).length;return Math.ceil(o/e)});g(()=>!l.value||r.value.length===0?[]:[...r.value.filter(o=>o.id!==l.value.id)].sort(()=>.5-Math.random()).slice(0,3));const L=g(()=>{if(!l.value||r.value.length===0)return null;const s=r.value.findIndex(e=>e.id===l.value.id);return s<=0?null:r.value[s-1]}),P=g(()=>{if(!l.value||r.value.length===0)return null;const s=r.value.findIndex(e=>e.id===l.value.id);return s===-1||s>=r.value.length-1?null:r.value[s+1]}),E=s=>{T.push(`/posts/${s}`),window.scrollTo(0,0)},D=s=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString("fa-IR",e)},B=s=>{},$=()=>{const s={id:f.value.length+1,name:i.value.name,email:i.value.email,text:i.value.text,date:new Date().toLocaleDateString("fa-IR")};f.value.unshift(s),i.value={name:"",email:"",text:""},alert("نظر شما با موفقیت ثبت شد!")},q=()=>{window.scrollTo({top:0,behavior:"smooth"})},I=()=>{_.value=window.scrollY>300};return N(()=>{C(),x.params.link&&k(x.params.link),window.addEventListener("scroll",I)}),z(()=>x.params.link,s=>{s&&k(s)}),F(()=>{window.removeEventListener("scroll",I)}),(s,e)=>(n(),a("div",J,[t("div",K,[t("nav",Q,[t("ul",W,[e[6]||(e[6]=t("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[t("a",{itemprop:"item",href:"/"},[t("span",{itemprop:"name"},"صفحه اصلی")]),t("meta",{itemprop:"position",content:"1"})],-1)),e[7]||(e[7]=t("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[t("a",{itemprop:"item",href:"/posts"},[t("span",{itemprop:"name"},"دوره‌ها")]),t("meta",{itemprop:"position",content:"2"})],-1)),t("li",X,[t("span",Z,d(l.value?.title),1),e[5]||(e[5]=t("meta",{itemprop:"position",content:"3"},null,-1))])])]),y.value?(n(),a("div",ee,[...e[8]||(e[8]=[A('<div class="h-64 bg-gray-200 animate-pulse" data-v-d00da9db></div><div class="p-6" data-v-d00da9db><div class="h-8 bg-gray-200 rounded w-3/4 mb-4 animate-pulse" data-v-d00da9db></div><div class="h-4 bg-gray-200 rounded mb-2 animate-pulse" data-v-d00da9db></div><div class="h-4 bg-gray-200 rounded w-5/6 mb-2 animate-pulse" data-v-d00da9db></div><div class="h-4 bg-gray-200 rounded w-4/6 animate-pulse" data-v-d00da9db></div></div>',2)])])):c.value?(n(),a("div",te,[t("div",se,[e[9]||(e[9]=t("i",{class:"fas fa-exclamation-triangle text-red-500 text-xl ml-3"},null,-1)),t("p",oe,d(c.value),1)])])):l.value?(n(),a("article",le,[t("header",ae,[t("img",{src:`https://api.nitrocode.ir/${l.value.image}`,alt:l.value.title,class:"w-full h-64 md:h-96 object-cover",loading:"lazy",onError:B},null,40,ne),e[12]||(e[12]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"},null,-1)),t("div",re,[t("h1",ie,d(l.value.title),1),t("div",de,[t("span",ue,[e[10]||(e[10]=t("i",{class:"far fa-calendar"},null,-1)),v(" "+d(D(l.value.created_at)),1)]),t("span",me,[e[11]||(e[11]=t("i",{class:"far fa-clock"},null,-1)),v(" "+d(j.value)+" دقیقه مطالعه ",1)])])])]),t("div",ce,[t("div",{class:"prose sm:prose-md md:prose-lg max-w-none text-gray-700 text-justify",innerHTML:l.value.description},null,8,pe),t("div",ve,[L.value?(n(),a("button",{key:0,onClick:e[0]||(e[0]=o=>E(L.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors"},[...e[13]||(e[13]=[t("i",{class:"fas fa-arrow-right"},null,-1),v(" مطلب قبلی ",-1)])])):h("",!0),P.value?(n(),a("button",{key:1,onClick:e[1]||(e[1]=o=>E(P.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors"},[...e[14]||(e[14]=[v(" مطلب بعدی ",-1),t("i",{class:"fas fa-arrow-left"},null,-1)])])):h("",!0)])])])):h("",!0),t("div",fe,[e[21]||(e[21]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 relative pb-3"},[v(" نظرات کاربران "),t("span",{class:"absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})],-1)),t("div",ge,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"ارسال نظر",-1)),t("form",{onSubmit:H($,["prevent"])},[t("div",be,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-gray-700 mb-2"},"نام و نام خانوادگی",-1)),b(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>i.value.name=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[w,i.value.name]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-gray-700 mb-2"},"ایمیل",-1)),b(t("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=o=>i.value.email=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[w,i.value.email]])])]),t("div",xe,[e[17]||(e[17]=t("label",{class:"block text-gray-700 mb-2"},"متن نظر",-1)),b(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>i.value.text=o),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[w,i.value.text]])]),e[18]||(e[18]=t("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300 hover:shadow-md"}," ارسال نظر ",-1))],32)]),f.value.length>0?(n(),a("div",ye,[(n(!0),a(S,null,M(f.value,o=>(n(),a("div",{key:o.id,class:"bg-white rounded-xl shadow-md p-6"},[t("div",he,[t("div",we,[t("div",_e,d(o.name.charAt(0)),1),t("div",ke,[t("h4",Le,d(o.name),1),t("p",Pe,d(o.date),1)])]),t("div",Ee,[(n(),a(S,null,M(5,u=>t("i",{key:u,class:"fas fa-star"})),64))])]),t("p",Ie,d(o.text),1)]))),128))])):(n(),a("div",Se,[...e[20]||(e[20]=[t("i",{class:"fas fa-comments text-gray-400 text-4xl mb-4"},null,-1),t("p",{class:"text-gray-600"},"هنوز نظری ثبت نشده است. اولین نفر باشید!",-1)])]))])]),b(t("button",{onClick:q,class:"fixed bottom-6 left-6 w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-110 z-50"},[...e[22]||(e[22]=[t("i",{class:"fas fa-arrow-up"},null,-1)])],512),[[O,_.value]])]))}},je=R(Me,[["__scopeId","data-v-d00da9db"]]);export{je as default};
