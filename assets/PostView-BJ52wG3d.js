import{r as m,h as f,b as R,i as $,x as U,c as n,o as r,d as e,z as x,f as y,t as u,F as h,g as w,m as g,q as z,B as _,C as F,P as N,j as A}from"./index-By0COWOY.js";const H={class:"min-h-screen bg-gray-50"},O={class:"container mx-auto p-1 sm:px-4 py-4 sm:py-8 max-w-4xl"},Y={"aria-label":"Breadcrumb",class:"breadcrumbs text-primary text-sm mt-4 pr-4",dir:"rtl"},G={itemscope:"",itemtype:"https://schema.org/BreadcrumbList"},J={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem",class:"text-gray-700"},K={itemprop:"name"},Q={key:0,class:"bg-white rounded-xl shadow-md overflow-hidden"},W={class:"p-6"},X={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg"},Z={class:"flex items-center"},ee={class:"text-red-700"},te={key:2,class:"bg-white rounded-xl shadow-md overflow-hidden"},se={class:"relative"},le=["src","alt"],oe={class:"absolute bottom-0 left-0 right-0 p-2 sm:p-6 text-white"},ne={class:"text-xl sm:text-2xl md:text-3xl font-bold mb-2"},re={class:"flex flex-wrap gap-4 text-sm"},ae={class:"flex items-center gap-1"},ie={class:"flex items-center gap-1"},de={class:"p-2 sm:p-6 md:p-8"},ue=["innerHTML"],me={class:"mt-10 pt-6 border-t border-gray-200 flex flex-col sm:flex-row justify-between gap-4"},ce={class:"mt-12"},pe={class:"bg-white rounded-xl shadow-md p-6 mb-8"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ve={class:"mb-4"},fe={key:0,class:"space-y-6"},xe={class:"flex justify-between items-start mb-3"},be={class:"flex items-center"},ye={class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold"},he={class:"mr-3"},we={class:"font-semibold text-gray-800"},_e={class:"text-gray-500 text-sm"},ke={class:"flex items-center text-yellow-400"},Le={class:"text-gray-700"},Ee={key:1,class:"bg-gray-100 rounded-xl p-8 text-center"},Ie={__name:"PostView",setup(Pe){const k=$(),M=A(),i=m([]),o=m(null),b=m(!1),c=m(null),L=m(!1),a=m({name:"",email:"",text:""}),v=m([]),S=async()=>{b.value=!0,c.value=null;try{const s=await N(`site/post/${k.params.link}`);s.ok&&s.post?(o.value=s.post,T(s.post)):c.value="پست مورد نظر یافت نشد"}catch(s){c.value="خطا در دریافت اطلاعات پست",console.error(s)}finally{b.value=!1}},T=s=>{document.title=s.title;const t=s.meta_description||s.small_description,l=s.meta_keywords||"برنامه نویسی, توسعه بازی, آموزش";let d=document.querySelector('meta[name="description"]');d||(d=document.createElement("meta"),d.name="description",document.head.appendChild(d)),d.content=t;let p=document.querySelector('meta[name="keywords"]');p||(p=document.createElement("meta"),p.name="keywords",document.head.appendChild(p)),p.content=l},j=f(()=>{if(!o.value)return 0;const s=o.value.description.replace(/<[^>]*>/g,""),t=200,l=s.trim().split(/\s+/).length;return Math.ceil(l/t)});f(()=>!o.value||i.value.length===0?[]:[...i.value.filter(l=>l.id!==o.value.id)].sort(()=>.5-Math.random()).slice(0,3));const E=f(()=>{if(!o.value||i.value.length===0)return null;const s=i.value.findIndex(t=>t.id===o.value.id);return s<=0?null:i.value[s-1]}),P=f(()=>{if(!o.value||i.value.length===0)return null;const s=i.value.findIndex(t=>t.id===o.value.id);return s===-1||s>=i.value.length-1?null:i.value[s+1]}),C=s=>{M.push(`/posts/${s}`),window.scrollTo(0,0)},D=s=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString("fa-IR",t)},V=s=>{},q=()=>{const s={id:v.value.length+1,name:a.value.name,email:a.value.email,text:a.value.text,date:new Date().toLocaleDateString("fa-IR")};v.value.unshift(s),a.value={name:"",email:"",text:""},alert("نظر شما با موفقیت ثبت شد!")},B=()=>{window.scrollTo({top:0,behavior:"smooth"})},I=()=>{L.value=window.scrollY>300};return S(),R(()=>{k.params.link,window.addEventListener("scroll",I)}),U(()=>{window.removeEventListener("scroll",I)}),(s,t)=>(r(),n("div",H,[e("div",O,[e("nav",Y,[e("ul",G,[t[6]||(t[6]=e("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[e("a",{itemprop:"item",href:"/"},[e("span",{itemprop:"name"},"صفحه اصلی")]),e("meta",{itemprop:"position",content:"1"})],-1)),t[7]||(t[7]=e("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[e("a",{itemprop:"item",href:"/posts"},[e("span",{itemprop:"name"},"مطالب")]),e("meta",{itemprop:"position",content:"2"})],-1)),e("li",J,[e("span",K,u(o.value?.title),1),t[5]||(t[5]=e("meta",{itemprop:"position",content:"3"},null,-1))])])]),b.value?(r(),n("div",Q,[t[9]||(t[9]=e("div",{class:"h-64 skeleton"},null,-1)),(r(!0),n(h,null,w(Array.from({length:7},(l,d)=>d),l=>(r(),n("div",W,[...t[8]||(t[8]=[e("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4 skeleton"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton"},null,-1)])]))),256))])):c.value?(r(),n("div",X,[e("div",Z,[t[10]||(t[10]=e("i",{class:"fas fa-exclamation-triangle text-red-500 text-xl ml-3"},null,-1)),e("p",ee,u(c.value),1)])])):o.value?(r(),n("article",te,[e("header",se,[e("img",{src:`https://api.nitrocode.ir/${o.value.image}`,alt:o.value.title,class:"w-full h-64 md:h-96 object-cover",loading:"lazy",onError:V},null,40,le),t[13]||(t[13]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"},null,-1)),e("div",oe,[e("h1",ne,u(o.value.title),1),e("div",re,[e("span",ae,[t[11]||(t[11]=e("i",{class:"far fa-calendar"},null,-1)),g(" "+u(D(o.value.created_at)),1)]),e("span",ie,[t[12]||(t[12]=e("i",{class:"far fa-clock"},null,-1)),g(" "+u(j.value)+" دقیقه مطالعه ",1)])])])]),e("div",de,[e("div",{class:"prose xl:prose-lg 2xl:prose-xl max-w-none text-gray-700 text-justify",innerHTML:o.value.description},null,8,ue),e("div",me,[E.value?(r(),n("button",{key:0,onClick:t[0]||(t[0]=l=>C(E.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors"},[...t[14]||(t[14]=[e("i",{class:"fas fa-arrow-right"},null,-1),g(" مطلب قبلی ",-1)])])):y("",!0),P.value?(r(),n("button",{key:1,onClick:t[1]||(t[1]=l=>C(P.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors"},[...t[15]||(t[15]=[g(" مطلب بعدی ",-1),e("i",{class:"fas fa-arrow-left"},null,-1)])])):y("",!0)])])])):y("",!0),e("div",ce,[t[22]||(t[22]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6 relative pb-3"},[g(" نظرات کاربران "),e("span",{class:"absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})],-1)),e("div",pe,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"ارسال نظر",-1)),e("form",{onSubmit:z(q,["prevent"])},[e("div",ge,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-gray-700 mb-2"},"نام و نام خانوادگی",-1)),x(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>a.value.name=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[_,a.value.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-gray-700 mb-2"},"ایمیل",-1)),x(e("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=l=>a.value.email=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[_,a.value.email]])])]),e("div",ve,[t[18]||(t[18]=e("label",{class:"block text-gray-700 mb-2"},"متن نظر",-1)),x(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.text=l),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[_,a.value.text]])]),t[19]||(t[19]=e("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300 hover:shadow-md"}," ارسال نظر ",-1))],32)]),v.value.length>0?(r(),n("div",fe,[(r(!0),n(h,null,w(v.value,l=>(r(),n("div",{key:l.id,class:"bg-white rounded-xl shadow-md p-6"},[e("div",xe,[e("div",be,[e("div",ye,u(l.name.charAt(0)),1),e("div",he,[e("h4",we,u(l.name),1),e("p",_e,u(l.date),1)])]),e("div",ke,[(r(),n(h,null,w(5,d=>e("i",{key:d,class:"fas fa-star"})),64))])]),e("p",Le,u(l.text),1)]))),128))])):(r(),n("div",Ee,[...t[21]||(t[21]=[e("i",{class:"fas fa-comments text-gray-400 text-4xl mb-4"},null,-1),e("p",{class:"text-gray-600"},"هنوز نظری ثبت نشده است. اولین نفر باشید!",-1)])]))])]),x(e("button",{onClick:B,class:"fixed bottom-6 left-6 w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-110 z-50"},[...t[23]||(t[23]=[e("i",{class:"fas fa-arrow-up"},null,-1)])],512),[[F,L.value]])]))}};export{Ie as default};
