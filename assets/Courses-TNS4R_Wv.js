import{_ as L,r as i,g as w,w as N,o as V,h as q,c as l,a as o,d as r,e as M,i as R,v as z,F as h,f as _,n as g,j as B,k as E,t as d,l as T,m as D,p as F}from"./index-B2YWiDdm.js";const S={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},P={class:"max-w-7xl mx-auto"},Q={class:"bg-white rounded-xl shadow-md p-6 mb-8"},U={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},A={class:"relative flex-1 max-w-md"},G={class:"flex flex-wrap gap-2"},H=["onClick"],J={key:0,class:"flex justify-center items-center h-64"},K={key:1,class:"bg-white rounded-xl shadow-md p-12 text-center"},O={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},W={class:"h-48 bg-gray-200 flex items-center justify-center"},X=["src","alt"],Y={class:"p-5"},Z={class:"text-lg font-bold text-gray-900 mb-2 line-clamp-2"},ee={class:"text-gray-600 text-sm mb-4 line-clamp-2"},te={class:"flex items-center justify-between"},se={key:0,class:"text-green-600 font-bold"},re={key:1,class:"text-gray-900 font-bold"},ae={key:3,class:"mt-8 flex justify-center"},le={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},oe=["disabled"],ne=["onClick"],ie={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},de=["disabled"],ue={__name:"Courses",setup(ce){const x=q();B();const u=i([]),m=i(!0),b=i(null),c=i(""),p=i("all"),n=i({total:0,per_page:10,current_page:1,last_page:1,next_page:null,prev_page:null}),k=i([{id:"all",name:"همه دوره‌ها"}]),f=async(t=1)=>{m.value=!0,b.value=null;try{const a=await(await fetch(`https://api.nitrocode.ir/site/products/courses-list?page=${t}`)).json();if(a.ok)u.value=a.list.data,n.value={total:parseInt(a.list.total),per_page:parseInt(a.list.per_page),current_page:parseInt(a.list.current_page),last_page:parseInt(a.list.last_page),next_page:a.list.next_page,prev_page:a.list.prev_page},u.value=u.value.map(e=>({...e,category:C()}));else throw new Error("خطا در دریافت داده‌ها")}catch(s){b.value=s.message,console.error("Error fetching courses:",s)}finally{m.value=!1}},C=()=>{const t=["web","mobile","ai","data","security"];return t[Math.floor(Math.random()*t.length)]},y=w(()=>{let t=u.value;if(p.value!=="all"&&(t=t.filter(s=>s.category===p.value)),c.value){const s=c.value.toLowerCase();t=t.filter(a=>a.title.toLowerCase().includes(s)||a.small_description.toLowerCase().includes(s))}return t}),I=w(()=>{const t=[],s=n.value.current_page,a=n.value.last_page;if(a<=7)for(let e=1;e<=a;e++)t.push(e);else if(s<=4){for(let e=1;e<=5;e++)t.push(e);t.push("..."),t.push(a)}else if(s>=a-3){t.push(1),t.push("...");for(let e=a-4;e<=a;e++)t.push(e)}else{t.push(1),t.push("...");for(let e=s-1;e<=s+1;e++)t.push(e);t.push("..."),t.push(a)}return t}),v=t=>{t&&t!==n.value.current_page&&(f(t),window.scrollTo({top:0,behavior:"smooth"}))},j=t=>parseInt(t).toLocaleString("fa-IR");return N(()=>x.query.page,t=>{t&&t!==n.value.current_page&&f(parseInt(t))}),V(()=>{const t=x.query.page?parseInt(x.query.page):1;f(t)}),(t,s)=>{const a=E("router-link");return o(),l("div",S,[r("div",P,[s[9]||(s[9]=r("div",{class:"text-center mb-10"},[r("h1",{class:"text-3xl font-extrabold text-gray-900 sm:text-4xl"}," دوره‌های آموزشی برنامه نویسی "),r("p",{class:"mt-3 max-w-2xl mx-auto text-xl text-gray-500"}," جدیدترین دوره‌های آموزشی برنامه نویسی را در اینجا پیدا کنید ")],-1)),r("div",Q,[r("div",U,[r("div",A,[s[3]||(s[3]=r("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[r("i",{class:"fas fa-search text-gray-400"})],-1)),R(r("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),class:"w-full pr-10 pl-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"جستجوی دوره..."},null,512),[[z,c.value]])]),r("div",G,[(o(!0),l(h,null,_(k.value,e=>(o(),l("button",{key:e.id,onClick:$=>p.value=e.id,class:g(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",p.value===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},d(e.name),11,H))),128))])])]),m.value?(o(),l("div",J,[...s[4]||(s[4]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)])])):y.value.length===0?(o(),l("div",K,[...s[5]||(s[5]=[r("i",{class:"fas fa-search text-gray-300 text-5xl mb-4"},null,-1),r("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"دوره‌ای یافت نشد",-1),r("p",{class:"text-gray-500"},"متأسفانه دوره‌ای با معیارهای جستجوی شما یافت نشد. لطفاً فیلترها را تغییر دهید.",-1)])])):(o(),l("div",O,[(o(!0),l(h,null,_(y.value,e=>(o(),l("div",{key:e.id,class:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300"},[r("div",W,[r("img",{src:`https://api.nitrocode.ir/${e.image}`,alt:e.title,class:"h-full w-full object-cover"},null,8,X)]),r("div",Y,[r("h3",Z,d(e.title),1),r("p",ee,d(e.small_description),1),r("div",te,[r("div",null,[e.price==="0"?(o(),l("span",se,"رایگان")):(o(),l("span",re,d(j(e.price))+" تومان",1))]),T(a,{to:{name:"course",params:{link:e.link}},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:D(()=>[...s[6]||(s[6]=[F(" مشاهده دوره ",-1)])]),_:1},8,["to"])])])]))),128))])),n.value.last_page>1?(o(),l("div",ae,[r("nav",le,[r("button",{onClick:s[1]||(s[1]=e=>v(n.value.prev_page)),disabled:!n.value.prev_page,class:g(["relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",n.value.prev_page?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"])},[...s[7]||(s[7]=[r("i",{class:"fas fa-chevron-right"},null,-1)])],10,oe),(o(!0),l(h,null,_(I.value,e=>(o(),l("div",{key:e},[e!=="..."?(o(),l("button",{key:0,onClick:$=>v(e),class:g(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",e===n.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},d(e),11,ne)):(o(),l("span",ie,d(e),1))]))),128)),r("button",{onClick:s[2]||(s[2]=e=>v(n.value.next_page)),disabled:!n.value.next_page,class:g(["relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",n.value.next_page?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"])},[...s[8]||(s[8]=[r("i",{class:"fas fa-chevron-left"},null,-1)])],10,de)])])):M("",!0)])])}}},ge=L(ue,[["__scopeId","data-v-7c4546a2"]]);export{ge as default};
