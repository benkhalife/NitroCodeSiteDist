import{_ as j,r as i,h as b,w as L,b as N,i as $,c as o,o as n,d as r,f as q,F as y,g as w,n as x,j as R,k as V,t as u,e as z,l as B,m as E}from"./index-D-qgWLPk.js";const M={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},F={class:"max-w-7xl mx-auto"},S={key:0,class:"flex justify-center items-center h-64"},T={key:1,class:"bg-white rounded-xl shadow-md p-12 text-center"},D={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},P={class:"h-48 bg-gray-200 flex items-center justify-center"},Q=["src","alt"],A={class:"p-5"},G={class:"text-lg font-bold text-gray-900 mb-2 line-clamp-2"},H={class:"text-gray-600 text-sm mb-4 line-clamp-2"},J={class:"flex items-center justify-between"},K={key:0,class:"text-green-600 font-bold"},O={key:1,class:"text-gray-900 font-bold"},U={key:3,class:"mt-8 flex justify-center"},W={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},X=["disabled"],Y=["onClick"],Z={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},ee=["disabled"],te={__name:"Courses",setup(se){const c=$();R();const d=i([]),p=i(!0),f=i(null),v=i(""),_=i("all"),l=i({total:0,per_page:10,current_page:1,last_page:1,next_page:null,prev_page:null});i([{id:"all",name:"همه دوره‌ها"}]);const g=async(e=1)=>{p.value=!0,f.value=null;try{const a=await(await fetch(`https://api.nitrocode.ir/site/products/courses-list?page=${e}`)).json();if(a.ok)d.value=a.list.data,l.value={total:parseInt(a.list.total),per_page:parseInt(a.list.per_page),current_page:parseInt(a.list.current_page),last_page:parseInt(a.list.last_page),next_page:a.list.next_page,prev_page:a.list.prev_page},d.value=d.value.map(t=>({...t,category:k()}));else throw new Error("خطا در دریافت داده‌ها")}catch(s){f.value=s.message,console.error("Error fetching courses:",s)}finally{p.value=!1}},k=()=>{const e=["web","mobile","ai","data","security"];return e[Math.floor(Math.random()*e.length)]},h=b(()=>{let e=d.value;if(_.value!=="all"&&(e=e.filter(s=>s.category===_.value)),v.value){const s=v.value.toLowerCase();e=e.filter(a=>a.title.toLowerCase().includes(s)||a.small_description.toLowerCase().includes(s))}return e}),C=b(()=>{const e=[],s=l.value.current_page,a=l.value.last_page;if(a<=7)for(let t=1;t<=a;t++)e.push(t);else if(s<=4){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(a)}else if(s>=a-3){e.push(1),e.push("...");for(let t=a-4;t<=a;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=s-1;t<=s+1;t++)e.push(t);e.push("..."),e.push(a)}return e}),m=e=>{e&&e!==l.value.current_page&&(g(e),window.scrollTo({top:0,behavior:"smooth"}))},I=e=>parseInt(e).toLocaleString("fa-IR");return L(()=>c.query.page,e=>{e&&e!==l.value.current_page&&g(parseInt(e))}),N(()=>{const e=c.query.page?parseInt(c.query.page):1;g(e)}),(e,s)=>{const a=V("router-link");return n(),o("div",M,[r("div",F,[s[7]||(s[7]=r("div",{class:"text-center mb-10"},[r("h1",{class:"text-3xl font-extrabold text-gray-900 sm:text-4xl"}," دوره‌های آموزشی برنامه نویسی "),r("p",{class:"mt-3 max-w-2xl mx-auto text-xl text-gray-500"}," جدیدترین دوره‌های آموزشی برنامه نویسی را در اینجا پیدا کنید ")],-1)),p.value?(n(),o("div",S,[...s[2]||(s[2]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)])])):h.value.length===0?(n(),o("div",T,[...s[3]||(s[3]=[r("i",{class:"fas fa-search text-gray-300 text-5xl mb-4"},null,-1),r("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"دوره‌ای یافت نشد",-1),r("p",{class:"text-gray-500"},"متأسفانه دوره‌ای با معیارهای جستجوی شما یافت نشد. لطفاً فیلترها را تغییر دهید.",-1)])])):(n(),o("div",D,[(n(!0),o(y,null,w(h.value,t=>(n(),o("div",{key:t.id,class:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300"},[r("div",P,[r("img",{src:`https://api.nitrocode.ir/${t.image}`,alt:t.title,class:"h-full w-full object-cover"},null,8,Q)]),r("div",A,[r("h3",G,u(t.title),1),r("p",H,u(t.small_description),1),r("div",J,[r("div",null,[t.price==="0"?(n(),o("span",K,"رایگان")):(n(),o("span",O,u(I(t.price))+" تومان",1))]),z(a,{to:{name:"course",params:{link:t.link}},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:B(()=>[...s[4]||(s[4]=[E(" مشاهده دوره ",-1)])]),_:1},8,["to"])])])]))),128))])),l.value.last_page>1?(n(),o("div",U,[r("nav",W,[r("button",{onClick:s[0]||(s[0]=t=>m(l.value.prev_page)),disabled:!l.value.prev_page,class:x(["relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",l.value.prev_page?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"])},[...s[5]||(s[5]=[r("i",{class:"fas fa-chevron-right"},null,-1)])],10,X),(n(!0),o(y,null,w(C.value,t=>(n(),o("div",{key:t},[t!=="..."?(n(),o("button",{key:0,onClick:ae=>m(t),class:x(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",t===l.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},u(t),11,Y)):(n(),o("span",Z,u(t),1))]))),128)),r("button",{onClick:s[1]||(s[1]=t=>m(l.value.next_page)),disabled:!l.value.next_page,class:x(["relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",l.value.next_page?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"])},[...s[6]||(s[6]=[r("i",{class:"fas fa-chevron-left"},null,-1)])],10,ee)])])):q("",!0)])])}}},le=j(te,[["__scopeId","data-v-64c1aa67"]]);export{le as default};
