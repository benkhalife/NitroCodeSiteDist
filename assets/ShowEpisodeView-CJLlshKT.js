const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-DC7n4rX4.js","assets/index-BI0SgzAS.js","assets/index-CxzV0rEN.css"])))=>i.map(i=>d[i]);
var we=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var ie=(h,u,v)=>u in h?we(h,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):h[u]=v,I=(h,u)=>{for(var v in u||(u={}))xe.call(u,v)&&ie(h,v,u[v]);if(oe)for(var v of oe(u))ke.call(u,v)&&ie(h,v,u[v]);return h};import{c as n,o as r,d as o,_ as ue,a as $e,r as f,v as Ee,h as M,I as D,b as Le,x as Ce,w as Te,n as E,t as y,f as k,e as L,l as q,p as W,q as Ae,F as O,g as V,y as Be,z as Se,B as Pe,G as C,i as Ie,P as le,s as De,j as Oe,A as Ve,C as ae,D as U,u as Re,E as re,k as Z}from"./index-BI0SgzAS.js";import{S as ne}from"./sweetalert2.esm.all-IjpX9IMJ.js";import{C as je}from"./CodeIcon-DWsMuneh.js";import{r as ze}from"./ShoppingCartIcon-ChuSsRrZ.js";function Me(h,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const Ue={},Ne={viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"none"};function Fe(h,u){return r(),n("svg",Ne,[...u[0]||(u[0]=[$e('<g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path stroke="#e0bc0b" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M27 7H5a2 2 0 00-2 2v14a2 2 0 002 2h22a2 2 0 002-2V9a2 2 0 00-2-2z"></path> <path stroke="#e0bc0b" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 13l3 6.5 3-6.5M16.5 13v6.5M20.5 17.275h1.48c.651 0 1.277-.275 1.721-.75a2.338 2.338 0 00.215-2.932 1.394 1.394 0 00-1.14-.593H20.5v4.275zm0 0V19.5"></path></g>',3)])])}const He=ue(Ue,[["render",Fe]]),Ge={class:"min-h-screen bg-gray-50"},Qe={class:"bg-white shadow-sm border-b border-gray-200"},Ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Ye={key:1,class:"sr-only"},Je={"aria-label":"Breadcrumb",class:"breadcrumbs text-primary text-sm mt-4",dir:"rtl"},qe={itemscope:"",itemtype:"https://schema.org/BreadcrumbList"},We={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},Ze=["href"],Xe={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem","aria-current":"page",class:"text-gray-700"},et={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",role:"main"},tt={class:"lg:flex lg:gap-8"},st={class:"lg:w-7/10"},ot={class:"relative aspect-video"},it=["poster"],lt={class:"hidden ms:block"},at={class:"flex gap-2 md:gap-4 flex flex-col md:flex-row items-center"},rt={key:0,class:"pb-1 px-2"},nt=["value"],ut={class:"bg-white rounded-lg shadow-md p-6 mb-6 mt-6","aria-labelledby":"episode-title"},dt={key:0,class:"prose xl:prose-lg 2xl:prose-xl text-justify max-w-none"},ct=["innerHTML"],pt={class:"py-2"},vt=["onClick"],mt={key:1,class:"flex flex-col gap-10"},ft={class:"skeleton h-4 w-full"},gt={key:0,class:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-md p-6 text-white"},_t={class:"text-xl mb-2"},ht={class:"mb-4 opacity-90"},yt={class:"lg:w-3/10 mb-8 lg:mb-0","aria-label":"فهرست اپیزودها"},bt={class:"bg-white rounded-lg shadow-md p-4"},wt={class:"space-y-2"},xt={class:"font-medium text-gray-900"},kt={class:"skeleton p-8 w-full"},$t={__name:"ShowEpisodeView",setup(h){const u=Ie(),v=Oe(),X=f(!0),g=f(null),e=f(null),$=f(null),N=f([]),de=f(null);f("");const R=f(!1),ce=f({}),d=f(null),F=f([]),ee=f(-1);Ee([]);const pe=s=>{if(!e.value)return"";let t=`${C()}site/active-user/get-course-video-file/${e.value.product_id}/${e.value.id}`,i=`${t}/${e.value.video_type}/${s}`;return D()==!1&&(t=`${C()}site/get-course-video-file/${e.value.product_id}/${e.value.id}`,i=`${t}/${e.value.video_type}/${s}`),i},H=()=>e.value?`${`${C()}site/get-file/${u.params.course_link}/episode/${u.params.episode_link}`}/${e.value.video_poster}`:"",G=f(!1),T={appUrl:"https://play.nitrocode.ir",config:{view:"split"},params:{console:"full",compiled:"none"}},ve=Pe(()=>re(()=>import("./vue-DC7n4rX4.js"),__vite__mapDeps([0,1,2]))),te=async s=>{G.value=!0,s.params&&(T.params=I(I({},T.params),s.params)),s.config&&(T.config=I(I({},T.config),s.config))},me=()=>{var A,B,S,P;if(!e.value||!g.value)return;const s=document.querySelector('script[type="application/ld+json"]');s&&s.remove();const t="https://nitrocode.ir/courses/",i=e.value.meta_canonical||`${t}${g.value.link}/${e.value.link}`,l=(Y==null?void 0:Y.value)||null,m=H()?encodeURI(H()):void 0,c=[{property:"og:title",content:e.value.meta_title||e.value.title},{property:"og:description",content:e.value.meta_description},{property:"og:image",content:m||""},{name:"description",content:e.value.meta_description},{name:"keywords",content:e.value.meta_keywords||""}];l&&(c.push({property:"og:video",content:l}),c.push({property:"og:video:type",content:"application/dash+xml"})),c.push({name:"robots",content:(A=e==null?void 0:e.value)==null?void 0:A.meta_robots}),c.push({name:"twitter:card",content:"summary_large_image"}),c.push({name:"twitter:title",content:e.value.meta_title||e.value.title}),c.push({name:"twitter:description",content:e.value.meta_description||e.value.description||""}),c.push({name:"twitter:image",content:m||""});const _={"@context":"https://schema.org","@graph":[]},b={"@type":"Course",name:g.value.title,url:`${t}${g.value.link}`,provider:{"@type":"Organization",name:"NitroCode"}},w={"@type":"Organization",name:"NitroCode"};if((j==null?void 0:j.value)===!0){const p={"@type":"VideoObject",name:e.value.title,description:e.value.small_description,thumbnailUrl:m,isAccessibleForFree:!1,requiresSubscription:!0,inLanguage:"fa",mainEntityOfPage:i,publisher:w,isPartOf:b};if(l){const a={"@type":"Clip",name:`${e.value.title} — پیش‌نمایش`,description:e.value.small_description,startOffset:0,endOffset:(B=e.value)==null?void 0:B.free_demo_time,isAccessibleForFree:!0,url:i,inLanguage:"fa",contentUrl:l};p.hasPart=a}p.duration=ae((S=e.value)==null?void 0:S.duration),p.uploadDate=U(e.value.created_at),p.dateModified=U(e.value.updated_at),Object.keys(p).forEach(a=>p[a]===void 0&&delete p[a]),_["@graph"].push(p)}else{const p={"@type":"VideoObject",name:e.value.title,description:e.value.small_description,thumbnailUrl:m,contentUrl:l||void 0,isAccessibleForFree:!0,inLanguage:"fa",mainEntityOfPage:i,publisher:w,isPartOf:b};p.duration=ae((P=e.value)==null?void 0:P.duration),p.uploadDate=U(e.value.created_at),p.dateModified=U(e.value.updated_at),Object.keys(p).forEach(a=>p[a]===void 0&&delete p[a]),_["@graph"].push(p)}const z={"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"صفحه اصلی",item:"https://nitrocode.ir"},{"@type":"ListItem",position:2,name:"دوره‌ها",item:`${t}`},{"@type":"ListItem",position:3,name:g.value.title||"",item:`${t}${g.value.link}`},{"@type":"ListItem",position:4,name:e.value.title||"",item:i}]};_["@graph"].push(z),Re({title:e.value.meta_title||e.value.title,meta:c,link:[{rel:"canonical",href:i}].concat($.value?[{rel:"next",href:`${t}${g.value.link}/${$.value.link}`}]:[]),script:[{type:"application/ld+json",children:JSON.stringify(_)}]})},se=async()=>{G.value=!1;try{X.value=!0;const{course_link:s,episode_link:t}=u.params;let i=null;D()?i=await le(`site/active-user/course/${s}/episode/${t}`):i=await le(`site/course/${s}/episode/${t}`),i.ok&&(g.value=i.product,e.value=i.episode,$.value=i.next_episode,N.value=i.episode_list,ce.value=i.author||{},De(()=>{me(),fe(),setTimeout(()=>{window.isLoading.value=!1},100),e.value.extentions=JSON.parse(e.value.extentions);for(const l of e.value.extentions)console.log(l),console.log(l.type,l==null?void 0:l.show_status),(l==null?void 0:l.type)==="livecodes"&&(l==null?void 0:l.show_status)==="force_show"&&te(l)}))}catch(s){console.error("Error fetching episode data:",s)}finally{X.value=!1}},fe=async()=>{try{const{MediaPlayer:s}=await re(async()=>{const{MediaPlayer:c}=await import("./dash.all.min-bR-nzyhm.js");return{MediaPlayer:c}},[]);d.value&&(d.value.destroy(),d.value=null);let t=e.value.video_target,i=`${C()}site/active-user/get-course-video-file/${e.value.product_id}/${e.value.id}`,l=`${i}/${e.value.video_type}/${t}`;D()==!1&&(i=`${C()}site/get-course-video-file/${e.value.product_id}/${e.value.id}`,l=`${i}/${e.value.video_type}/${t}`),(Q.value||K.value)&&(t=e.value.video_preview_target||"preview.mpd",i=`${C()}site/get-course-video-file/${e.value.product_id}/${e.value.id}`,l=`${i}/${e.value.video_type}/${t}`),d.value=s().create(),d.value.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}}),d.value.initialize(document.querySelector("#videoPlayer"),l,!1),d.value.on(s.events.QUALITY_CHANGE_REQUESTED,c=>{}),d.value.on(s.events.PLAYBACK_METADATA_LOADED,c=>{F.value=ge(d.value)}),d.value.on(s.events.QUALITY_CHANGE_RENDERED,c=>{});let m=!1;d.value.on(s.events.PLAYBACK_TIME_UPDATED,c=>{const _=document.querySelector("#videoPlayer");if(_&&!m){const b=_.currentTime,w=_.duration;w-b<=5&&w>0&&b>0&&(m=!0,R.value=!0)}}),d.value.on(s.events.PLAYBACK_STARTED,c=>{m=!1}),d.value.on(s.events.PLAYBACK_ENDED,c=>{m=!1,R.value=!0})}catch(s){console.error(s)}},ge=s=>{if(!s)return[];try{return(s.getRepresentationsByType("video")||[]).map((i,l)=>({index:l,bitrate:i.bitrate,bitrateInKbit:i.bitrateInKbit,width:i.width,height:i.height,id:i.id,label:`${i.height}p`}))}catch(t){return console.error("خطا در دریافت لیست کیفیت‌ها:",t),[]}},_e=s=>{if(!d.value)return;const t=s.target.value;t===""?(d.value.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}),ee.value=-1):(d.value.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),he(d.value,t)&&(ee.value=t))},he=(s,t)=>{if(!s)return!1;try{const i=s.getRepresentationsByType("video")||[],l=i.find(m=>m.id==t);return l?(s.setRepresentationForTypeById("video",l.id,!0),!0):(console.warn("Representation موردنظر پیدا نشد:",t,i),!1)}catch(i){return console.error("خطا در تغییر کیفیت:",i),!1}},Q=M(()=>e.value?["free_with_login","vip_preview","vip"].indexOf(e.value.display_status)>-1&&D()==!1:!1),K=M(()=>{var s;return e.value?!!((e.value.display_status=="vip_preview"||e.value.display_status=="vip")&&D()&&((s=e==null?void 0:e.value)==null?void 0:s.user_has_access)==!1):!1}),j=M(()=>Q.value||K.value),Y=M(()=>{if(!e.value)return"";let s=e.value.video_target;return j.value&&(s=e.value.video_preview_target||"preview.mpd"),pe(s)});se(),Le(()=>{window.scrollTo(0,0)}),Ce(()=>{d.value&&(d.value.destroy(),d.value=null)}),Te(()=>u.params.episode_link,(s,t)=>{s&&s!==t&&(se(),window.scrollTo(0,0))});const ye=()=>{window.localStorage.setItem("redirect_after_login",u.fullPath),v.push({name:"login"})},be=async()=>{try{const s=await Ve("site/active-user/course-shopping/add-to-cart/"+g.value.id);(s.ok||s.ok==!1&&s.carts&&s.carts.length)&&ne.fire({icon:"success",title:"دوره به سبد خرید اضافه شد",text:"می‌توانید پرداخت را انجام دهید یا سبد خرید را مشاهده کنید.",showCancelButton:!0,confirmButtonText:"پرداخت و مشاهده‌ی دوره",cancelButtonText:"مشاهده سبد خرید"}).then(t=>{t.isConfirmed?v.push({name:"user_cart",hash:"#checkout_now"}):t.dismiss===ne.DismissReason.cancel&&v.push({name:"user_cart"})})}catch(s){console.error(s)}};return(s,t)=>{var l,m,c,_,b,w,z,A,B,S,P,p;const i=Ae("router-link");return r(),n("div",Ge,[o("header",Qe,[o("div",Ke,[e.value?(r(),n("h1",{key:0,class:E(["text-xl md:text-2xl font-bold text-gray-900",{"skeleton w-56 p-4":!((l=e.value)!=null&&l.title)}])},y(((m=e.value)==null?void 0:m.title)||""),3)):(r(),n("h1",Ye,"در حال بارگذاری اپیزود...")),o("nav",Je,[o("ul",qe,[t[4]||(t[4]=o("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[o("a",{itemprop:"item",href:"/"},[o("span",{itemprop:"name"},"صفحه اصلی")]),o("meta",{itemprop:"position",content:"1"})],-1)),t[5]||(t[5]=o("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[o("a",{itemprop:"item",href:"/courses"},[o("span",{itemprop:"name"},"دوره‌ها")]),o("meta",{itemprop:"position",content:"2"})],-1)),o("li",We,[o("a",{itemprop:"item",href:`/courses/${((c=g.value)==null?void 0:c.link)||""}`},[o("span",{itemprop:"name",class:E({"skeleton w-56 p-3":!((_=e.value)!=null&&_.title)})},y(((b=g.value)==null?void 0:b.title)||""),3)],8,Ze),t[2]||(t[2]=o("meta",{itemprop:"position",content:"3"},null,-1))]),o("li",Xe,[o("span",{itemprop:"name",class:E({"skeleton w-56 p-3":!((w=e.value)!=null&&w.title)})},y(((z=e.value)==null?void 0:z.title)||""),3),t[3]||(t[3]=o("meta",{itemprop:"position",content:"4"},null,-1))])])])])]),o("div",et,[o("div",tt,[o("div",st,[o("article",{class:E(["rounded-lg shadow-md overflow-hidden shadow-lg",{skeleton:!((A=e.value)!=null&&A.title)}]),"aria-labelledby":"episode-title"},[o("div",ot,[e.value?(r(),n("video",{key:0,id:"videoPlayer",ref_key:"videoPlayer",ref:de,class:"w-full h-full",controls:"",poster:H(),preload:"metadata",playsinline:""}," مرورگر شما از پخش ویدیو پشتیبانی نمی‌کند لطفا از آخرین نسخه از مرورگر گوگل کروم استفاده کنید ",8,it)):k("",!0),Q.value?(r(),n("div",{key:1,class:E(["pulse-opacity-smooth top-0 left-0 w-full gap-2 flex justify-center lg:justify-between p-4 absolute z-10 items-center duration-500 h-20",{"h-full":R.value}])},[t[7]||(t[7]=o("div",{class:"flex-1"},[o("div",{class:"text-sm sm:text-md md:text-lg lg:text-xl font-bold p-2 text-teal-300"}," برای مشاهده‌ی کامل این ویدیو لطفا وارد سایت (حساب کاربری) شوید "),o("p")],-1)),o("div",null,[o("button",{onClick:t[0]||(t[0]=a=>ye()),class:"btn btn-sm md:btn-md btn-primary"},[t[6]||(t[6]=o("div",null,"ورود و مشاهده",-1)),o("div",null,[L(q(Me),{class:"size-5 animate-pulse text-green-300"})])])])],2)):k("",!0),K.value?(r(),n("div",{key:2,class:E(["pulse-opacity-smooth top-0 left-0 w-full gap-1 md:gap-2 lg:gap-8 flex flex-col justify-center p-2 ms:p-4 absolute z-10 items-center duration-500",{"h-full":R.value}])},[o("div",lt,[L(He,{class:"size-8 md:size-12 fill-yello-700 text-yellow-700"})]),t[10]||(t[10]=o("div",{class:"text-md sm:text-lg md:text-xl lg:text-2xl font-bold text-center p-2 text-white"}," بعد از خرید این دوره تمام قسمت‌های آن قابل مشاهده است ",-1)),o("div",at,[o("button",{onClick:t[1]||(t[1]=a=>be()),class:"text-sm md:text-md lg:text-lg hover:bg-black duration-200 cursor-pointer flex items-center gap-2 p-2 border-2 border-[#e0bc0b] text-[#e0bc0b] font-bold rounded-lg items-center"},[t[8]||(t[8]=o("div",null,"خرید این دوره و مشاهده",-1)),o("div",null,[L(q(ze),{class:"size-6 animate-pulse text-green-[#e0bc0b]"})])]),L(i,{to:"/courses/"+((B=g.value)==null?void 0:B.link),class:"text-sm md:text-md lg:text-lg opacity-80 hover:bg-black duration-200 cursor-pointer flex items-center gap-2 p-2 border-2 border-gray-300 text-gray-300 font-bold rounded-lg items-center"},{default:W(()=>[...t[9]||(t[9]=[Z(" مشاهده‌ي اطلاعات دوره ",-1)])]),_:1},8,["to"])])],2)):k("",!0)]),F.value.length>1?(r(),n("div",rt,[o("select",{class:"select select-ghost select-sm",onChange:_e},[t[11]||(t[11]=o("option",{value:""},"انتخاب کیفیت : اتوماتیک",-1)),(r(!0),n(O,null,V(F.value,(a,x)=>(r(),n("option",{key:x,value:a.id},y(a.label)+" "+y(a.label=="1080p"?" (کیفیت عالی)":"")+" "+y(a.label=="720p"?" (کیفیت خوب)":"")+" "+y(a.label=="480p"?" (کیفیت کم)":""),9,nt))),128))],32)])):k("",!0)],2),o("section",ut,[t[13]||(t[13]=o("h2",{id:"episode-title",class:"sr-only"},"اطلاعات اپیزود",-1)),(S=e.value)!=null&&S.description?(r(),n("div",dt,[(P=e.value)!=null&&P.description?(r(),n("p",{key:0,class:"text-gray-800",innerHTML:(p=e.value)==null?void 0:p.description},null,8,ct)):k("",!0),(r(!0),n(O,null,V(e.value.extentions,(a,x)=>(r(),n("div",pt,[a.show_status==="button"&&a.type==="livecodes"?(r(),n("button",{key:0,onClick:J=>te(a),class:"btn btn-primary"},[t[12]||(t[12]=Z(" ویرایشگر کد آنلاین ",-1)),L(je,{class:"size-6 animate-pulse"})],8,vt)):k("",!0)]))),256)),G.value?(r(),Be(q(ve),Se({key:e.value.id,dir:"ltr"},T),null,16)):k("",!0)])):(r(),n("div",mt,[(r(!0),n(O,null,V(Array.from({length:10},(a,x)=>x),a=>(r(),n("div",ft))),256))]))]),$.value?(r(),n("div",gt,[t[15]||(t[15]=o("h3",{class:"text-lg font-bold mb-2"},"قسمت بعدی",-1)),o("h4",_t,y($.value.title),1),o("p",ht,y($.value.small_description),1),L(i,{to:{name:"show_episode",params:{course_link:s.course_link,episode_link:$.value.link}},class:"block bg-white text-blue-600 font-semibold px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors flex items-center"},{default:W(()=>[...t[14]||(t[14]=[Z(" مشاهده قسمت بعدی ",-1),o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)])]),_:1},8,["to"])])):k("",!0)]),o("aside",yt,[o("div",bt,[t[16]||(t[16]=o("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"لیست اپیزودها",-1)),o("ul",wt,[N.value.length?(r(!0),n(O,{key:0},V(N.value,(a,x)=>{var J;return r(),n("li",{key:x,class:E(["",a.link===((J=e.value)==null?void 0:J.link)?"bg-blue-50 border-r-4 border-blue-500":"hover:bg-gray-50"])},[L(i,{to:{name:"show_episode",params:{course_link:s.course_link,episode_link:a.link}},class:"p-3 rounded-lg cursor-pointer transition-colors block"},{default:W(()=>[o("h3",xt,y(a.title),1)]),_:2},1032,["to"])],2)}),128)):(r(!0),n(O,{key:1},V(Array.from({length:10},(a,x)=>x+1),a=>(r(),n("li",kt))),256))])])])])])])}}},Bt=ue($t,[["__scopeId","data-v-b2620813"]]);export{Bt as default};
