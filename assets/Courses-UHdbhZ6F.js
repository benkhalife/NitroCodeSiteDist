import{_ as j,r as i,h as b,w as L,b as N,i as $,c as o,o as n,d as a,f as q,F as y,g as w,n as x,P as R,j as V,k as z,t as u,e as B,l as E,m as M}from"./index-By0COWOY.js";const P={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},F={class:"max-w-7xl mx-auto"},S={key:0,class:"flex justify-center items-center h-64"},T={key:1,class:"bg-white rounded-xl shadow-md p-12 text-center"},D={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Q={class:"h-48 bg-gray-200 flex items-center justify-center"},A=["src","alt"],G={class:"p-5"},H={class:"text-lg font-bold text-gray-900 mb-2 line-clamp-2"},J={class:"text-gray-600 text-sm mb-4 line-clamp-2"},K={class:"flex items-center justify-between"},O={key:0,class:"text-green-600 font-bold"},U={key:1,class:"text-gray-900 font-bold"},W={key:3,class:"mt-8 flex justify-center"},X={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Y=["disabled"],Z=["onClick"],ee={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},te=["disabled"],se={__name:"Courses",setup(ae){const c=$();V();const d=i([]),p=i(!0),f=i(null),v=i(""),_=i("all"),l=i({total:0,per_page:10,current_page:1,last_page:1,next_page:null,prev_page:null});i([{id:"all",name:"همه دوره‌ها"}]);const g=async(t=1)=>{p.value=!0,f.value=null;try{const e=await R(`site/products/courses-list?page=${t}`);if(e.ok)d.value=e.list.data,l.value={total:parseInt(e.list.total),per_page:parseInt(e.list.per_page),current_page:parseInt(e.list.current_page),last_page:parseInt(e.list.last_page),next_page:e.list.next_page,prev_page:e.list.prev_page},d.value=d.value.map(r=>({...r,category:k()}));else throw new Error("خطا در دریافت داده‌ها")}catch(e){f.value=e.message,console.error("Error fetching courses:",e)}finally{p.value=!1}},k=()=>{const t=["web","mobile","ai","data","security"];return t[Math.floor(Math.random()*t.length)]},h=b(()=>{let t=d.value;if(_.value!=="all"&&(t=t.filter(e=>e.category===_.value)),v.value){const e=v.value.toLowerCase();t=t.filter(r=>r.title.toLowerCase().includes(e)||r.small_description.toLowerCase().includes(e))}return t}),C=b(()=>{const t=[],e=l.value.current_page,r=l.value.last_page;if(r<=7)for(let s=1;s<=r;s++)t.push(s);else if(e<=4){for(let s=1;s<=5;s++)t.push(s);t.push("..."),t.push(r)}else if(e>=r-3){t.push(1),t.push("...");for(let s=r-4;s<=r;s++)t.push(s)}else{t.push(1),t.push("...");for(let s=e-1;s<=e+1;s++)t.push(s);t.push("..."),t.push(r)}return t}),m=t=>{t&&t!==l.value.current_page&&(g(t),window.scrollTo({top:0,behavior:"smooth"}))},I=t=>parseInt(t).toLocaleString("fa-IR");return L(()=>c.query.page,t=>{t&&t!==l.value.current_page&&g(parseInt(t))}),N(()=>{const t=c.query.page?parseInt(c.query.page):1;g(t)}),(t,e)=>{const r=z("router-link");return n(),o("div",P,[a("div",F,[e[7]||(e[7]=a("div",{class:"text-center mb-10"},[a("h1",{class:"text-3xl font-extrabold text-gray-900 sm:text-4xl"}," دوره‌های آموزشی برنامه نویسی "),a("p",{class:"mt-3 max-w-2xl mx-auto text-xl text-gray-500"}," جدیدترین دوره‌های آموزشی برنامه نویسی را در اینجا پیدا کنید ")],-1)),p.value?(n(),o("div",S,[...e[2]||(e[2]=[a("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)])])):h.value.length===0?(n(),o("div",T,[...e[3]||(e[3]=[a("i",{class:"fas fa-search text-gray-300 text-5xl mb-4"},null,-1),a("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"دوره‌ای یافت نشد",-1),a("p",{class:"text-gray-500"},"متأسفانه دوره‌ای با معیارهای جستجوی شما یافت نشد. لطفاً فیلترها را تغییر دهید.",-1)])])):(n(),o("div",D,[(n(!0),o(y,null,w(h.value,s=>(n(),o("div",{key:s.id,class:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300"},[a("div",Q,[a("img",{src:`https://api.nitrocode.ir/${s.image}`,alt:s.title,class:"h-full w-full object-cover"},null,8,A)]),a("div",G,[a("h3",H,u(s.title),1),a("p",J,u(s.small_description),1),a("div",K,[a("div",null,[s.price==="0"?(n(),o("span",O,"رایگان")):(n(),o("span",U,u(I(s.price))+" تومان",1))]),B(r,{to:{name:"course",params:{link:s.link}},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:E(()=>[...e[4]||(e[4]=[M(" مشاهده دوره ",-1)])]),_:1},8,["to"])])])]))),128))])),l.value.last_page>1?(n(),o("div",W,[a("nav",X,[a("button",{onClick:e[0]||(e[0]=s=>m(l.value.prev_page)),disabled:!l.value.prev_page,class:x(["relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",l.value.prev_page?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"])},[...e[5]||(e[5]=[a("i",{class:"fas fa-chevron-right"},null,-1)])],10,Y),(n(!0),o(y,null,w(C.value,s=>(n(),o("div",{key:s},[s!=="..."?(n(),o("button",{key:0,onClick:re=>m(s),class:x(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===l.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},u(s),11,Z)):(n(),o("span",ee,u(s),1))]))),128)),a("button",{onClick:e[1]||(e[1]=s=>m(l.value.next_page)),disabled:!l.value.next_page,class:x(["relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",l.value.next_page?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"])},[...e[6]||(e[6]=[a("i",{class:"fas fa-chevron-left"},null,-1)])],10,te)])])):q("",!0)])])}}},oe=j(se,[["__scopeId","data-v-ae36a9e6"]]);export{oe as default};
