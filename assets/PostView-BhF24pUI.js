import{_ as F,r as v,g as x,o as H,u as A,w as O,s as Y,c as a,a as r,d as t,h as b,e as p,k as E,l as $,j as G,t as i,b as J,m,F as h,f as y,x as K,v as C,y as Q,i as W}from"./index-C0nYo2oA.js";const X={class:"min-h-screen bg-gray-50"},Z={class:"bg-white border-b border-gray-200 py-4"},tt={class:"container mx-auto px-4"},et={class:"flex items-center space-x-reverse space-x-2 text-sm"},st={class:"flex items-center"},lt={key:0,class:"flex items-center"},ot={class:"text-gray-800 font-medium truncate max-w-xs"},at={class:"container mx-auto px-4 py-8 max-w-4xl"},rt={key:0,class:"bg-white rounded-xl shadow-md overflow-hidden"},nt={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg"},it={class:"flex items-center"},dt={class:"text-red-700"},ut={key:2,class:"bg-white rounded-xl shadow-md overflow-hidden"},ct={class:"relative"},mt=["src","alt"],vt={class:"absolute bottom-0 left-0 right-0 p-6 text-white"},pt={class:"text-2xl md:text-3xl font-bold mb-2"},ft={class:"flex flex-wrap gap-4 text-sm"},gt={class:"flex items-center gap-1"},xt={class:"flex items-center gap-1"},bt={class:"p-6 md:p-8"},ht=["innerHTML"],yt={key:0,class:"mt-8 pt-6 border-t border-gray-200"},wt={class:"flex flex-wrap gap-2"},_t={class:"mt-10 pt-6 border-t border-gray-200 flex flex-col sm:flex-row justify-between gap-4"},kt={key:3,class:"mt-12"},Ct={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Pt=["onClick"],jt={class:"h-48 overflow-hidden"},St=["src","alt"],Tt={class:"p-5"},Mt={class:"text-lg font-bold text-gray-800 mb-2 line-clamp-2"},Vt={class:"text-gray-600 mb-3 line-clamp-2"},It={class:"flex justify-between items-center"},Et={class:"text-gray-500 text-sm"},$t={class:"mt-12"},Dt={class:"bg-white rounded-xl shadow-md p-6 mb-8"},Lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Nt={class:"mb-4"},qt={key:0,class:"space-y-6"},Rt={class:"flex justify-between items-start mb-3"},Ut={class:"flex items-center"},zt={class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold"},Bt={class:"mr-3"},Ft={class:"font-semibold text-gray-800"},Ht={class:"text-gray-500 text-sm"},At={class:"flex items-center text-yellow-400"},Ot={class:"text-gray-700"},Yt={key:1,class:"bg-gray-100 rounded-xl p-8 text-center"},Gt={__name:"PostView",setup(Jt){const w=A(),D=W(),d=v([]),o=v(null),_=v(!1),f=v(null),P=v(!1),u=v({name:"",email:"",text:""}),g=v([{id:1,name:"علی رضایی",email:"ali@example.com",text:"مقاله بسیار مفیدی بود، ممنون از به اشتراک گذاری دانشتون.",date:"۱۴۰۲/۰۵/۱۵"},{id:2,name:"سارا محمدی",email:"sara@example.com",text:"من از این مقاله استفاده زیادی کردم، لطفا ادامه بدید.",date:"۱۴۰۲/۰۵/۱۰"}]),L=async()=>{try{const e=await(await fetch("https://api.nitrocode.ir/site/posts/list")).json();e.ok&&e.list&&(d.value=e.list.data)}catch(s){console.error("خطا در دریافت لیست پست‌ها:",s)}},j=async s=>{_.value=!0,f.value=null;try{const n=await(await fetch(`https://api.nitrocode.ir/site/post/${s}`)).json();n.ok&&n.post?(o.value=n.post,N(n.post)):f.value="پست مورد نظر یافت نشد"}catch(e){f.value="خطا در دریافت اطلاعات پست",console.error(e)}finally{_.value=!1}},N=s=>{document.title=`${s.title} | نیترو کد`;const e=s.meta_description||s.small_description,n=s.meta_keywords||"برنامه نویسی, توسعه بازی, آموزش";let l=document.querySelector('meta[name="description"]');l||(l=document.createElement("meta"),l.name="description",document.head.appendChild(l)),l.content=e;let c=document.querySelector('meta[name="keywords"]');c||(c=document.createElement("meta"),c.name="keywords",document.head.appendChild(c)),c.content=n},q=x(()=>{if(!o.value)return 0;const s=o.value.description.replace(/<[^>]*>/g,""),e=200,n=s.trim().split(/\s+/).length;return Math.ceil(n/e)}),S=x(()=>!o.value||d.value.length===0?[]:[...d.value.filter(n=>n.id!==o.value.id)].sort(()=>.5-Math.random()).slice(0,3)),T=x(()=>{if(!o.value||d.value.length===0)return null;const s=d.value.findIndex(e=>e.id===o.value.id);return s<=0?null:d.value[s-1]}),M=x(()=>{if(!o.value||d.value.length===0)return null;const s=d.value.findIndex(e=>e.id===o.value.id);return s===-1||s>=d.value.length-1?null:d.value[s+1]}),k=s=>{D.push(`/post/${s}`),window.scrollTo(0,0)},V=s=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString("fa-IR",e)},R=s=>{s.target.src="https://via.placeholder.com/800x400?text=No+Image"},U=()=>{if(navigator.share)navigator.share({title:o.value.title,text:o.value.small_description,url:window.location.href}).catch(console.error);else{const s=window.location.href;navigator.clipboard.writeText(s).then(()=>alert("لینک پست در کلیپ‌بورد کپی شد!")).catch(e=>console.error("خطا در کپی لینک:",e))}},z=()=>{const s={id:g.value.length+1,name:u.value.name,email:u.value.email,text:u.value.text,date:new Date().toLocaleDateString("fa-IR")};g.value.unshift(s),u.value={name:"",email:"",text:""},alert("نظر شما با موفقیت ثبت شد!")},B=()=>{window.scrollTo({top:0,behavior:"smooth"})},I=()=>{P.value=window.scrollY>300};return H(()=>{L(),w.params.link&&j(w.params.link),window.addEventListener("scroll",I)}),O(()=>w.params.link,s=>{s&&j(s)}),Y(()=>{window.removeEventListener("scroll",I)}),(s,e)=>{const n=G("router-link");return r(),a("div",X,[t("nav",Z,[t("div",tt,[t("ol",et,[t("li",null,[E(n,{to:"/",class:"text-gray-600 hover:text-blue-600 flex items-center"},{default:$(()=>[...e[5]||(e[5]=[t("i",{class:"fas fa-home ml-1"},null,-1),m(" خانه ",-1)])]),_:1})]),t("li",st,[e[7]||(e[7]=t("i",{class:"fas fa-chevron-left text-gray-400 mx-2 text-xs"},null,-1)),E(n,{to:"/posts",class:"text-gray-600 hover:text-blue-600"},{default:$(()=>[...e[6]||(e[6]=[m(" وبلاگ ",-1)])]),_:1})]),o.value?(r(),a("li",lt,[e[8]||(e[8]=t("i",{class:"fas fa-chevron-left text-gray-400 mx-2 text-xs"},null,-1)),t("span",ot,i(o.value.title),1)])):p("",!0)])])]),t("div",at,[t("div",{class:"flex justify-end mb-6"},[t("div",{class:"flex gap-3"},[t("button",{onClick:U,class:"group relative w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 shadow-lg flex items-center justify-center text-white transition-all duration-300 hover:shadow-xl hover:scale-105 active:scale-95 overflow-hidden",title:"اشتراک گذاری"},[...e[9]||(e[9]=[t("i",{class:"fas fa-share-alt text-lg transition-transform duration-300 group-hover:rotate-12"},null,-1),t("span",{class:"absolute inset-0 rounded-full bg-gradient-to-br from-blue-600 to-purple-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),t("span",{class:"absolute inset-0 rounded-full bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)])])])]),_.value?(r(),a("div",rt,[...e[10]||(e[10]=[J('<div class="h-64 bg-gray-200 animate-pulse" data-v-298096cc></div><div class="p-6" data-v-298096cc><div class="h-8 bg-gray-200 rounded w-3/4 mb-4 animate-pulse" data-v-298096cc></div><div class="h-4 bg-gray-200 rounded mb-2 animate-pulse" data-v-298096cc></div><div class="h-4 bg-gray-200 rounded w-5/6 mb-2 animate-pulse" data-v-298096cc></div><div class="h-4 bg-gray-200 rounded w-4/6 animate-pulse" data-v-298096cc></div></div>',2)])])):f.value?(r(),a("div",nt,[t("div",it,[e[11]||(e[11]=t("i",{class:"fas fa-exclamation-triangle text-red-500 text-xl ml-3"},null,-1)),t("p",dt,i(f.value),1)])])):o.value?(r(),a("article",ut,[t("header",ct,[t("img",{src:`https://api.nitrocode.ir/${o.value.image}`,alt:o.value.title,class:"w-full h-64 md:h-96 object-cover",loading:"lazy",onError:R},null,40,mt),e[14]||(e[14]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"},null,-1)),t("div",vt,[t("h1",pt,i(o.value.title),1),t("div",ft,[t("span",gt,[e[12]||(e[12]=t("i",{class:"far fa-calendar"},null,-1)),m(" "+i(V(o.value.created_at)),1)]),t("span",xt,[e[13]||(e[13]=t("i",{class:"far fa-clock"},null,-1)),m(" "+i(q.value)+" دقیقه مطالعه ",1)])])])]),t("div",bt,[t("div",{class:"prose prose-lg max-w-none text-gray-700",innerHTML:o.value.description},null,8,ht),o.value.meta_keywords?(r(),a("div",yt,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"برچسب‌ها",-1)),t("div",wt,[(r(!0),a(h,null,y(o.value.meta_keywords.split(","),(l,c)=>(r(),a("span",{key:c,class:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm"},i(l.trim()),1))),128))])])):p("",!0),t("div",_t,[T.value?(r(),a("button",{key:0,onClick:e[0]||(e[0]=l=>k(T.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors"},[...e[16]||(e[16]=[t("i",{class:"fas fa-arrow-right"},null,-1),m(" مطلب قبلی ",-1)])])):p("",!0),M.value?(r(),a("button",{key:1,onClick:e[1]||(e[1]=l=>k(M.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors"},[...e[17]||(e[17]=[m(" مطلب بعدی ",-1),t("i",{class:"fas fa-arrow-left"},null,-1)])])):p("",!0)])])])):p("",!0),S.value.length>0?(r(),a("div",kt,[e[19]||(e[19]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 relative pb-3"},[m(" مقالات مشابه "),t("span",{class:"absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})],-1)),t("div",Ct,[(r(!0),a(h,null,y(S.value,l=>(r(),a("article",{key:l.id,class:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-2 cursor-pointer",onClick:c=>k(l.link)},[t("div",jt,[t("img",{src:`https://api.nitrocode.ir/${l.image}`,alt:l.title,class:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",loading:"lazy"},null,8,St)]),t("div",Tt,[t("h3",Mt,i(l.title),1),t("p",Vt,i(l.small_description),1),t("div",It,[t("span",Et,i(V(l.created_at)),1),e[18]||(e[18]=t("button",{class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," ادامه مطلب ",-1))])])],8,Pt))),128))])])):p("",!0),t("div",$t,[e[26]||(e[26]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 relative pb-3"},[m(" نظرات کاربران "),t("span",{class:"absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})],-1)),t("div",Dt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"ارسال نظر",-1)),t("form",{onSubmit:K(z,["prevent"])},[t("div",Lt,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-gray-700 mb-2"},"نام و نام خانوادگی",-1)),b(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>u.value.name=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[C,u.value.name]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-gray-700 mb-2"},"ایمیل",-1)),b(t("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=l=>u.value.email=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[C,u.value.email]])])]),t("div",Nt,[e[22]||(e[22]=t("label",{class:"block text-gray-700 mb-2"},"متن نظر",-1)),b(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>u.value.text=l),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[C,u.value.text]])]),e[23]||(e[23]=t("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300 hover:shadow-md"}," ارسال نظر ",-1))],32)]),g.value.length>0?(r(),a("div",qt,[(r(!0),a(h,null,y(g.value,l=>(r(),a("div",{key:l.id,class:"bg-white rounded-xl shadow-md p-6"},[t("div",Rt,[t("div",Ut,[t("div",zt,i(l.name.charAt(0)),1),t("div",Bt,[t("h4",Ft,i(l.name),1),t("p",Ht,i(l.date),1)])]),t("div",At,[(r(),a(h,null,y(5,c=>t("i",{key:c,class:"fas fa-star"})),64))])]),t("p",Ot,i(l.text),1)]))),128))])):(r(),a("div",Yt,[...e[25]||(e[25]=[t("i",{class:"fas fa-comments text-gray-400 text-4xl mb-4"},null,-1),t("p",{class:"text-gray-600"},"هنوز نظری ثبت نشده است. اولین نفر باشید!",-1)])]))])]),b(t("button",{onClick:B,class:"fixed bottom-6 left-6 w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-110 z-50"},[...e[27]||(e[27]=[t("i",{class:"fas fa-arrow-up"},null,-1)])],512),[[Q,P.value]])])}}},Qt=F(Gt,[["__scopeId","data-v-298096cc"]]);export{Qt as default};
