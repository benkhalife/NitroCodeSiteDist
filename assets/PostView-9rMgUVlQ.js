import{r as m,h as b,b as N,w as z,x as G,c as o,o as r,d as t,H as x,t as d,f as p,F as P,g as $,l as j,D as y,k as f,m as K,J as T,K as Y,P as Q,i as X,s as B,G as q,j as Z}from"./index-BntTsBbQ.js";const ee={class:"min-h-screen bg-gray-50"},te={class:"container mx-auto p-1 sm:px-4 py-4 sm:py-8 max-w-4xl"},ae={"aria-label":"Breadcrumb",class:"breadcrumbs text-primary text-sm mt-4 pr-4",dir:"rtl"},se={itemscope:"",itemtype:"https://schema.org/BreadcrumbList"},le={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem",class:"text-gray-700"},oe={itemprop:"name"},re={id:"main-content",role:"main",tabindex:"-1"},ne={key:0,class:"bg-white rounded-xl shadow-md overflow-hidden","aria-busy":"true"},ie={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",role:"alert","aria-live":"assertive"},de={class:"flex items-center"},ue={class:"text-red-700"},ce={key:2,class:"bg-white rounded-xl shadow-md overflow-hidden"},me={class:"relative"},pe=["src","alt"],ge={class:"backdrop-blur-xs absolute bottom-0 left-0 right-0 p-2 sm:p-6 text-white"},fe={id:"post-title",class:"text-xl sm:text-2xl md:text-3xl font-bold mb-2"},ve={class:"flex flex-wrap gap-4 text-sm","aria-hidden":"false"},he={class:"flex items-center gap-1"},be=["datetime"],xe={class:"flex items-center gap-1"},ye={key:0,class:"flex items-center gap-1"},we=["datetime","aria-label"],_e={class:"p-2 sm:p-4 md:p-8"},ke={key:0,class:"mx-auto max-w-2xl bg-base-200/50 p-4 rounded-xl mt-6","aria-labelledby":"audio-caption"},Ee={class:"flex flex-col gap-3"},Le={id:"audio-caption"},Ie={class:"text-lg font-semibold text-primary flex items-center gap-2"},Pe=["aria-label"],$e=["src"],Te=["src"],De=["src"],Me=["innerHTML"],Se={class:"mt-10 pt-6 border-t border-gray-200 flex flex-col sm:flex-row justify-between gap-4"},Ce=["aria-label"],Ae=["aria-label"],je={class:"mt-12"},Be={class:"bg-white rounded-xl shadow-md p-6 mb-8"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ue={class:"mb-4"},Ve={key:0,class:"mt-4 text-sm text-green-600",role:"status","aria-live":"polite"},Oe={key:0,class:"space-y-6"},Re={class:"flex justify-between items-start mb-3"},Je={class:"flex items-center"},We={class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold","aria-hidden":"true"},Fe={class:"mr-3"},He={class:"font-semibold text-gray-800"},Ne={class:"text-gray-500 text-sm"},ze={class:"flex items-center text-yellow-400","aria-hidden":"true"},Ge={class:"text-gray-700"},Ke={key:1,class:"bg-gray-100 rounded-xl p-8 text-center"},Xe={__name:"PostView",setup(Ye){const D=X(),U=Z(),c=m([]),l=m(null),w=m(!1),g=m(null),M=m(!1),u=m({name:"",email:"",text:""}),v=m([]),_=m(""),S=async()=>{w.value=!0,g.value=null;try{const a=await Q(`site/post/${D.params.link}`);if(a.ok&&a.post){l.value=a.post,O(a.post),await B(),V();const e=document.getElementById("main-content");e&&e.focus()}else g.value="Ù¾Ø³Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯"}catch(a){g.value="Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø³Øª",console.error(a)}finally{w.value=!1}},V=()=>{try{const a=document.getElementById("post-content");if(!a)return;Array.from(a.querySelectorAll("a")).forEach(s=>{if(s.setAttribute("target","_blank"),s.setAttribute("rel","noopener noreferrer nofollow"),!s.getAttribute("aria-label")){const n=(s.textContent||"").trim();n.length>0&&s.setAttribute("aria-label",`Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù„ÛŒÙ†Ú©: ${n}`)}})}catch(a){console.warn("processDescriptionLinks error",a)}},O=a=>{document.title=a.meta_title||a.title||document.title;const e=a.meta_description||a.small_description||"",s=a.meta_keywords||"Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ, ØªÙˆØ³Ø¹Ù‡ Ø¨Ø§Ø²ÛŒ, Ø¢Ù…ÙˆØ²Ø´";i("name","description",e),i("name","keywords",s),i("name","robots",a.meta_robots||"index,follow"),R(a.meta_canonical),i("property","og:type","article"),i("property","og:title",a.meta_title||a.title),i("property","og:description",e),i("property","og:url",a.meta_canonical||window.location.href),i("property","og:image",h()),i("name","twitter:card","summary_large_image"),i("name","twitter:title",a.meta_title||a.title),i("name","twitter:description",e),i("name","twitter:image",h());const n={"@context":"https://schema.org","@type":"Article",headline:a.meta_title||a.title,description:e,image:[h()],datePublished:y(a.created_at,"+03:30"),dateModified:y(a.updated_at,"+03:30"),mainEntityOfPage:{"@type":"WebPage","@id":a.meta_canonical||window.location.href},author:{"@type":"Person",name:"Ø¨Ù†ÛŒØ§Ù…ÛŒÙ† Ø®Ù„ÛŒÙÙ‡",url:"https://nitrocode.ir/authors/benyamin-khalife"}};J(n)},i=(a,e,s)=>{if(!s&&s!=="")return;let n=document.querySelector(`meta[${a}='${e}']`);n||(n=document.createElement("meta"),n.setAttribute(a,e),document.head.appendChild(n)),n.content=s},R=a=>{let e=document.querySelector('link[rel="canonical"]');e||(e=document.createElement("link"),e.rel="canonical",document.head.appendChild(e)),e.href=a},J=a=>{try{const e=document.head.querySelector('script[type="application/ld+json"][data-generated="nitrocode"]');e&&e.remove();const s=document.createElement("script");s.type="application/ld+json",s.setAttribute("data-generated","nitrocode"),s.text=JSON.stringify(a),document.head.appendChild(s)}catch(e){console.warn("insertJsonLD error",e)}},W=b(()=>{if(!l.value)return 0;const a=(l.value.description||"").replace(/<[^>]*>/g,""),e=200,s=a.trim()===""?0:a.trim().split(/\s+/).length;return Math.max(1,Math.ceil(s/e))});b(()=>!l.value||c.value.length===0?[]:[...c.value.filter(s=>s.id!==l.value.id)].sort(()=>.5-Math.random()).slice(0,3));const k=b(()=>{if(!l.value||c.value.length===0)return null;const a=c.value.findIndex(e=>e.id===l.value.id);return a<=0?null:c.value[a-1]}),E=b(()=>{if(!l.value||c.value.length===0)return null;const a=c.value.findIndex(e=>e.id===l.value.id);return a===-1||a>=c.value.length-1?null:c.value[a+1]}),C=a=>{U.push(`/posts/${a}`),window.scrollTo(0,0)},L=a=>{if(!a)return"";const e={year:"numeric",month:"long",day:"numeric"};try{return new Date(a).toLocaleDateString("fa-IR",e)}catch{return a}},h=()=>`${q()}${l?.value?.image}`,I=a=>q()+`files/posts/${l.value.id}/${a}`,F=()=>{const a={id:v.value.length+1,name:u.value.name,email:u.value.email,text:u.value.text,date:new Date().toLocaleDateString("fa-IR")};v.value.unshift(a),u.value={name:"",email:"",text:""},_.value="Ù†Ø¸Ø± Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!",B(()=>{const e=document.getElementById("main-content");e&&e.focus()})},H=()=>{window.scrollTo({top:0,behavior:"smooth"})},A=()=>{M.value=window.scrollY>300};return N(()=>{S(),window.addEventListener("scroll",A)}),z(()=>D.params.link,async(a,e)=>{a&&a!==e&&await S()}),G(()=>{window.removeEventListener("scroll",A)}),(a,e)=>(r(),o("div",ee,[t("div",te,[t("nav",ae,[t("ul",se,[e[7]||(e[7]=t("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[t("a",{itemprop:"item",href:"/"},[t("span",{itemprop:"name"},"ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ")]),t("meta",{itemprop:"position",content:"1"})],-1)),e[8]||(e[8]=t("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[t("a",{itemprop:"item",href:"/posts"},[t("span",{itemprop:"name"},"Ù…Ø·Ø§Ù„Ø¨")]),t("meta",{itemprop:"position",content:"2"})],-1)),t("li",le,[t("span",oe,d(l.value?.title),1),e[6]||(e[6]=t("meta",{itemprop:"position",content:"3"},null,-1))])])]),t("main",re,[w.value?(r(),o("div",ne,[e[10]||(e[10]=t("div",{class:"h-64 skeleton","aria-hidden":"true"},null,-1)),(r(!0),o(P,null,$(Array.from({length:7},(s,n)=>n),s=>(r(),o("div",{key:s,class:"p-6"},[...e[9]||(e[9]=[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4 skeleton","aria-hidden":"true"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton","aria-hidden":"true"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton","aria-hidden":"true"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton","aria-hidden":"true"},null,-1)])]))),128))])):g.value?(r(),o("div",ie,[t("div",de,[e[11]||(e[11]=t("i",{class:"fas fa-exclamation-triangle text-red-500 text-xl ml-3","aria-hidden":"true"},null,-1)),t("p",ue,d(g.value),1)])])):l.value?(r(),o("article",ce,[t("header",me,[t("img",{src:h(),alt:l.value.title,class:"w-full h-80 md:h-128 object-cover",loading:"lazy",onError:e[0]||(e[0]=(...s)=>a.handleImageError&&a.handleImageError(...s))},null,40,pe),e[15]||(e[15]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent","aria-hidden":"true"},null,-1)),t("div",ge,[t("h1",fe,d(l.value.title),1),t("div",ve,[t("span",he,[e[12]||(e[12]=t("i",{class:"far fa-calendar","aria-hidden":"true"},null,-1)),t("time",{datetime:j(y)(l.value.created_at,"+03:30")},d(L(l.value.created_at)),9,be)]),t("span",xe,[e[13]||(e[13]=t("i",{class:"far fa-clock","aria-hidden":"true"},null,-1)),t("span",null,d(W.value)+" Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡",1)]),l.value.updated_at!=l.value.created_at?(r(),o("span",ye,[e[14]||(e[14]=t("span",{class:"whitespace-nowrap"},"Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ",-1)),t("time",{datetime:j(y)(l.value.updated_at,"+03:30"),"aria-label":`ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${L(l.value.updated_at)}`},d(L(l.value.updated_at)),9,we)])):p("",!0)])])]),t("div",_e,[l.value.audio&&l.value.audio.trim()!==""?(r(),o("section",ke,[t("figure",Ee,[t("figcaption",Le,[t("h2",Ie,[e[16]||(e[16]=t("span",null,"ğŸ§",-1)),f(" Ø´Ù†ÛŒØ¯Ù† ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ: "+d(l.value.title),1)])]),t("audio",{class:"audio w-full",controls:"",preload:"metadata",crossorigin:"anonymous","aria-label":`Ù¾Ø®Ø´ ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ø¨Ø±Ø§ÛŒ ${l.value.title}`},[l.value.audio.endsWith(".mp3")?(r(),o("source",{key:0,src:I(l.value.audio),type:"audio/mpeg"},null,8,$e)):l.value.audio.endsWith(".m4a")?(r(),o("source",{key:1,src:I(l.value.audio),type:"audio/mp4"},null,8,Te)):(r(),o("source",{key:2,src:I(l.value.audio),type:"audio/mpeg"},null,8,De)),e[17]||(e[17]=f(" Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² ØªÚ¯ ØµÙˆØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ",-1))],8,Pe)])])):p("",!0),t("div",{id:"post-content",class:"prose xl:prose-lg 2xl:prose-xl mt-2 max-w-none text-gray-700 text-justify",innerHTML:l.value.description},null,8,Me),t("div",Se,[k.value?(r(),o("button",{key:0,onClick:e[1]||(e[1]=s=>C(k.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors","aria-label":`Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø·Ù„Ø¨ Ù‚Ø¨Ù„ÛŒ: ${k.value.title}`},[...e[18]||(e[18]=[t("i",{class:"fas fa-arrow-right","aria-hidden":"true"},null,-1),f(" Ù…Ø·Ù„Ø¨ Ù‚Ø¨Ù„ÛŒ ",-1)])],8,Ce)):p("",!0),E.value?(r(),o("button",{key:1,onClick:e[2]||(e[2]=s=>C(E.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors","aria-label":`Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ÛŒ: ${E.value.title}`},[...e[19]||(e[19]=[f(" Ù…Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ÛŒ ",-1),t("i",{class:"fas fa-arrow-left","aria-hidden":"true"},null,-1)])],8,Ae)):p("",!0)])])])):p("",!0),t("div",je,[e[26]||(e[26]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 relative pb-3"},[f("Ù†Ø¸Ø±Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† "),t("span",{class:"absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full","aria-hidden":"true"})],-1)),t("div",Be,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±",-1)),t("form",{onSubmit:K(F,["prevent"])},[t("div",qe,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-gray-700 mb-2"},"Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ",-1)),x(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>u.value.name=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[T,u.value.name]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-gray-700 mb-2"},"Ø§ÛŒÙ…ÛŒÙ„",-1)),x(t("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=s=>u.value.email=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[T,u.value.email]])])]),t("div",Ue,[e[22]||(e[22]=t("label",{class:"block text-gray-700 mb-2"},"Ù…ØªÙ† Ù†Ø¸Ø±",-1)),x(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>u.value.text=s),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[T,u.value.text]])]),e[23]||(e[23]=t("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300 hover:shadow-md","aria-label":"Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±"}," Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø± ",-1))],32),_.value?(r(),o("div",Ve,d(_.value),1)):p("",!0)]),v.value.length>0?(r(),o("div",Oe,[(r(!0),o(P,null,$(v.value,s=>(r(),o("div",{key:s.id,class:"bg-white rounded-xl shadow-md p-6"},[t("div",Re,[t("div",Je,[t("div",We,d(s.name.charAt(0)),1),t("div",Fe,[t("h4",He,d(s.name),1),t("p",Ne,d(s.date),1)])]),t("div",ze,[(r(),o(P,null,$(5,n=>t("i",{key:n,class:"fas fa-star"})),64))])]),t("p",Ge,d(s.text),1)]))),128))])):(r(),o("div",Ke,[...e[25]||(e[25]=[t("i",{class:"fas fa-comments text-gray-400 text-4xl mb-4","aria-hidden":"true"},null,-1),t("p",{class:"text-gray-600"},"Ù‡Ù†ÙˆØ² Ù†Ø¸Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÙˆÙ„ÛŒÙ† Ù†ÙØ± Ø¨Ø§Ø´ÛŒØ¯!",-1)])]))])])]),x(t("button",{onClick:H,class:"fixed bottom-6 left-6 w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-110 z-50","aria-label":"Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§"},[...e[27]||(e[27]=[t("i",{class:"fas fa-arrow-up","aria-hidden":"true"},null,-1)])],512),[[Y,M.value]])]))}};export{Xe as default};
