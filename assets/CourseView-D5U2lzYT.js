import{c as a,o as i,d as e,_ as Q,i as X,r as m,h as C,b as Y,n as o,t as d,f as w,k as y,e as b,l as I,m as ee,F as te,g as se,p as z,q as le,P as oe,s as ae,I as E,j as ie,A as re,u as ne,D as L}from"./index-BZ86g4TG.js";import{S}from"./sweetalert2.esm.all-NNS-RXd7.js";import{r as de}from"./ShoppingCartIcon-Dtw5Zsri.js";function ce(M,_){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function ue(M,_){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})])}const pe={class:"min-h-screen bg-gray-50"},me={class:"mb-6 bg-white shadow-sm border-b border-gray-200"},xe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},ge={"aria-label":"Breadcrumb",class:"breadcrumbs text-primary text-sm mt-4",dir:"rtl"},he={itemscope:"",itemtype:"https://schema.org/BreadcrumbList",class:"flex gap-2"},ve={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem","aria-current":"page",class:"text-gray-700"},fe={key:0,class:"container mx-auto px-4 py-16"},be={class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative max-w-3xl mx-auto text-center",role:"alert"},_e={key:1,class:"md:container mx-auto px-1 md:px-4","aria-labelledby":"main-course-title"},we={class:"mb-8","aria-labelledby":"course-overview"},ye={class:"flex flex-col lg:flex-row gap-6 p-2"},ke={"aria-hidden":"false",class:"relative"},$e=["poster","aria-label"],Ce=["src"],Ie={class:"sr-only"},Le=["src","alt"],Se={class:"w-full xl:w-5/12 bg-white rounded-xl shadow-lg order-1 lg:order-2","aria-labelledby":"course-card"},Me={id:"course-card",class:"flex flex-col justify-between w-full h-full pt-6 p-4"},Te={key:1,class:"flex flex-wrap gap-2",role:"list"},Be={class:"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full flex items-center",role:"listitem"},Ve={class:"rounded-xl p-2 md:p-4 flex flex-col gap-4"},je={class:"flex gap-1 items-center pb-2"},De={key:0,class:"inline-flex items-center gap-2"},Pe={class:"tooltip","data-tip":"وضعیت درحال ضبط به معنی آن است که هنوز قسمت‌ها(درس‌های این دوره) درحال ضبط هست و هنوز تمام آن قسمت‌ها روی سایت قرار نگرفته و به مرور زمان قسمت‌های بعدی روی سایت قرار می‌گیرد و تکمیل می شود"},ze={key:1,class:"inline-flex items-center gap-2"},Ee={class:"flex gap-1 items-center pb-2"},Oe={class:"flex gap-1 items-center pb-2"},He={class:"flex gap-1 items-center pb-2"},Ne={key:0},Re={class:"w-full flex flex-col md:flex-row gap-2"},We=["aria-label"],Ae={class:"bg-white rounded-xl shadow-lg p-2 md:p-6 xl:p-12 mb-8 course-description","aria-labelledby":"desc-heading"},Ue=["innerHTML"],Ze={key:1,class:"flex flex-col gap-4"},qe={id:"episodes",class:"bg-white rounded-xl shadow-lg p-6","aria-labelledby":"episodes-heading"},Fe={class:"flex flex-col gap-6 md:gap-4"},Je=["aria-posinset","aria-setsize"],Ge={class:"flex flex-wrap md:flex-nowrap gap-2 items-center p-4"},Ke={class:"absolute -top-4 z-10 -right-2 md:hidden bg-gray-50 w-10 h-10 rounded-full flex items-center justify-center border border-gray-200"},Qe={key:0,class:"text-blue-700 font-bold text-sm"},Xe={key:1,class:"text-blue-700 font-bold text-sm"},Ye={class:"hidden md:flex md:order-1 flex-shrink-0 w-10 h-10 rounded-full bg-blue-600 items-center justify-center shadow-md","aria-hidden":"true"},et={key:0,class:"text-white font-bold text-sm"},tt={key:1,class:"text-blue-700 font-bold text-sm text-white"},st={class:"order-0 w-full md:order-2 md:w-auto flex-grow mt-2 md:mt-0"},lt={class:"font-semibold text-gray-800 text-lg"},ot={class:"text-gray-600 text-sm mt-1"},at={class:"order-2 md:order-3 flex-shrink-0"},it={class:"order-3 md:order-4 flex"},rt={class:"text-blue-600 hover:text-blue-800 transition-all duration-300 hover:scale-110"},nt={class:"bg-white rounded-xl shadow-lg p-2 mt-8","aria-labelledby":"instructor-heading"},dt={class:"flex flex-col md:flex-row items-center hover:bg-gray-500/5 duration-200 p-2 lg:p-6 rounded-md"},ct={class:"flex items-center gap-2 md:gap-4"},ut={class:"font-bold text-gray-800 text-lg"},pt={class:"text-gray-600"},mt={key:0,class:"md:mr-auto md:ml-0"},xt=1280,gt=720,ht={__name:"CourseView",setup(M){const _=X(),x=ie(),O=_.params.link,l=m(null),p=m(null),g=m([]),T=m(!0),h=m(null),v=m({}),k=m(0),B=C(()=>l.value?`https://api.nitrocode.ir/${l.value.image}`:""),H=C(()=>p.value&&p.value.video_poster?`https://api.nitrocode.ir/${p.value.video_poster_url}`:B.value),N=C(()=>p.value&&p.value.video_url?`https://api.nitrocode.ir${p.value.video_url}`:null),R=s=>{const t=document.getElementById(s);t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),window.history.pushState(null,null,`#${s}`))},W=(s,t)=>{ne({htmlAttrs:{lang:"fa",dir:"rtl"},title:s.meta_title||`${s.title} | نیتروکد`,meta:[{name:"description",content:s.meta_description||s.small_description||"دوره آموزشی"},{name:"keywords",content:s.meta_keywords||"آموزش برنامه نویسی, دوره آموزشی, نیتروکد"},{name:"robots",content:s.meta_robots||"index,follow"},{property:"og:locale",content:"fa_IR"},{property:"og:title",content:s.meta_title||s.title},{property:"og:description",content:s.meta_description||s.small_description||"دوره آموزشی"},{property:"og:image",content:`https://api.nitrocode.ir/${s.image}`},{property:"og:url",content:window.location.href},{property:"og:type",content:"website"},{property:"og:site_name",content:"نیتروکد"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:s.meta_title||s.title},{name:"twitter:description",content:s.meta_description||s.small_description||"دوره آموزشی"},{name:"twitter:image",content:`https://api.nitrocode.ir/${s.image}`}],link:[{rel:"canonical",href:s.meta_canonical||window.location.href}],script:[{type:"application/ld+json",children:JSON.stringify(A(t))}]})},A=s=>{const{product:t,introduction:r,episodes:n,author:c}=s,u=window.location.origin,D=f=>{const $=Math.floor(f/3600),G=Math.floor(f%3600/60),K=f%60;return`PT${$}H${G}M${K}S`},F=n?n.reduce((f,$)=>f+$.duration,0):0,J={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"صفحه اصلی",item:`${u}/`},{"@type":"ListItem",position:2,name:"دوره‌ها",item:`${u}/courses`},{"@type":"ListItem",position:3,name:t.title,item:`${u}${window.location.pathname}`}]},P=[{"@context":"https://schema.org","@type":"Course",name:t.title,description:t.small_description||t.meta_description,provider:{"@type":"Organization",name:"NitroCode",sameAs:u},url:`${u}/courses/${t.link}`,image:t.image.startsWith("http")?t.image:`${u}/${t.image}`,courseCode:t.code||`course-${t.id}`,inLanguage:"fa",dateCreated:L(t.created_at),dateModified:L(t.updated_at),offers:{"@type":"Offer",category:"Paid",priceCurrency:"IRR",price:t.price*10,url:`${u}/courses/${t.link}`,availability:t.status==="completed"||t.publish?"https://schema.org/InStock":"https://schema.org/OutOfStock"},hasCourseInstance:{"@type":"CourseInstance",courseMode:"online",courseWorkload:D(F),instructor:{"@type":"Person",name:c.name,description:c.title,image:c.avatar?c.avatar.startsWith("http")?c.avatar:`${u}/${c.avatar}`:void 0,url:c.website||`${u}/author/${c.slug}`}}},J];return r&&r.video_url&&P.push({"@context":"https://schema.org","@type":"VideoObject",name:r.title||`${t.title} — ویدیوی معرفی`,description:t.small_description,thumbnailUrl:r.video_poster_url?r.video_poster_url.startsWith("http")?r.video_poster_url:`${u}${r.video_poster_url}`:"",uploadDate:L(r.created_at),contentUrl:r.video_url.startsWith("http")?r.video_url:`${u}${r.video_url}`,duration:D(r.duration)}),{"@context":"https://schema.org","@graph":P}},V=async()=>{if(E()==!1){S.fire({icon:"warning",title:"برای افزودن به سبد خرید لطفا وارد حساب کاربری خود شوید",confirmButtonText:"ورود به حساب کاربری"}).then(async s=>{s.isConfirmed&&(await window.localStorage.setItem("redirect_after_login",x.currentRoute.value.fullPath+"#auto-add"),x.push({name:"login"}))});return}try{const s=await re("site/active-user/course-shopping/add-to-cart/"+l.value.id);(s.ok||s.ok==!1&&s.carts&&s.carts.length)&&S.fire({icon:"success",title:"دوره به سبد خرید اضافه شد",text:"می‌توانید پرداخت را انجام دهید یا سبد خرید را مشاهده کنید.",showCancelButton:!0,confirmButtonText:"پرداخت و مشاهده‌ی دوره",cancelButtonText:"مشاهده سبد خرید"}).then(t=>{t.isConfirmed?x.push({name:"user_cart",hash:"#checkout_now"}):t.dismiss===S.DismissReason.cancel&&x.push({name:"user_cart"})})}catch(s){console.error(s)}},j=async()=>{T.value=!0,h.value=null;try{const s=await oe(`site/course/${O}`);if(s.ok){l.value=s.product,p.value=s.introduction,g.value=s.episodes||[],v.value=s.author||{};const t=g.value.reduce((r,n)=>r+(parseInt(n.duration)||0),0);k.value=U(t),W(l.value,s),ae(()=>{window.isLoading.value=!1,_.hash==="#auto-add"&&E()&&(x.replace({hash:""}),V())})}else h.value="دوره مورد نظر یافت نشد"}catch(s){h.value="خطا در اتصال به سرور",console.error(s)}finally{T.value=!1}},U=s=>{const t=Number(s)||0,r=Math.floor(t/3600),n=Math.floor(t%3600/60);return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},Z=s=>{switch(s){case"free":return"bg-green-100 text-green-800";case"vip":return"bg-yellow-100 text-yellow-800";case"free_with_login":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},q=s=>{switch(s){case"free":return"رایگان";case"vip":return"VIP";case"free_with_login":return"نیاز به ورود";case"vip_preview":return"VIP + پیش‌نمایش";default:return"قفل شده"}};return Y(()=>{j()}),(s,t)=>{const r=le("router-link");return i(),a("div",pe,[e("header",me,[e("div",xe,[e("h1",{id:"main-course-title",class:o(["text-xl md:text-2xl font-bold text-gray-900",{"skeleton w-72 p-4":!l.value}])},d(l.value?.title),3),e("nav",ge,[e("ul",he,[t[3]||(t[3]=e("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[e("a",{itemprop:"item",href:"/",class:"hover:underline"},[e("span",{itemprop:"name"},"صفحه اصلی")]),e("meta",{itemprop:"position",content:"1"})],-1)),t[4]||(t[4]=e("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[e("a",{itemprop:"item",href:"/courses",class:"hover:underline"},[e("span",{itemprop:"name"},"دوره‌ها")]),e("meta",{itemprop:"position",content:"2"})],-1)),e("li",ve,[e("span",{itemprop:"name",class:o({"skeleton w-72 p-3":!l.value})},d(l.value?.title),3),t[2]||(t[2]=e("meta",{itemprop:"position",content:"3"},null,-1))])])])])]),h.value?(i(),a("div",fe,[e("div",be,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold mb-2"},"خطا در بارگذاری دوره",-1)),e("p",null,d(h.value),1),e("button",{onClick:j,class:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"}," تلاش مجدد ")])])):(i(),a("div",_e,[e("section",we,[e("div",ye,[e("div",{class:o(["w-full xl:w-7/12 order-2 lg:order-1",{skeleton:!l.value}])},[e("figure",ke,[p.value&&p.value.video_url?(i(),a("video",{key:0,poster:H.value,controls:"",playsinline:"",preload:"metadata",width:xt,height:gt,class:"top-0 left-0 w-full h-full rounded-xl bg-black shadow-lg","aria-label":`ویدیوی معرفی دوره ${l.value?.title}`},[e("source",{src:N.value,type:"video/mp4"},null,8,Ce),t[6]||(t[6]=y(" مرورگر شما از پخش ویدیو پشتیبانی نمی‌کند. ",-1))],8,$e)):w("",!0),e("figcaption",Ie,"ویدیوی معرفی دوره "+d(l.value?.title),1)]),e("noscript",null,[e("img",{src:B.value,alt:l.value?.title+" — تصویر دوره",loading:"lazy"},null,8,Le)])],2),e("aside",Se,[e("div",Me,[l.value?(i(),a("div",Te,[t[7]||(t[7]=e("span",{class:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full flex items-center",role:"listitem"}," برنامه‌نویسی ",-1)),e("span",Be,d(k.value)+" ساعت ",1),t[8]||(t[8]=e("span",{class:"bg-purple-100 text-purple-800 text-sm font-medium px-3 py-1 rounded-full flex items-center",role:"listitem"}," مقدماتی ",-1))])):(i(),a("div",{key:0,class:o({"skeleton w-full p-5":!l.value})},null,2)),e("div",Ve,[e("div",je,[t[10]||(t[10]=e("div",{class:"text-gray-600 text-lg md:text-xl"},"وضعیت دوره : ",-1)),e("div",{class:o(["text-lg md:text-2xl font-bold text-blue-600",{"skeleton w-72 p-3":!l.value}])},[l.value&&l.value.status==="recording"?(i(),a("span",De,[t[9]||(t[9]=y(" درحال ضبط ",-1)),e("span",Pe,[b(I(ce),{class:"size-6 text-warning"})])])):l.value&&l.value.status==="completed"?(i(),a("span",ze," تکمیل شده ")):w("",!0)],2)]),e("div",Ee,[t[11]||(t[11]=e("div",{class:"text-gray-600 text-lg md:text-xl"},"تعداد قسمت‌ها : ",-1)),e("div",{class:o(["text-lg md:text-2xl font-bold text-blue-600",{"skeleton w-72 p-3":!l.value}])},d(g.value?.length||""),3)]),e("div",Oe,[t[12]||(t[12]=e("div",{class:"text-gray-600 text-lg md:text-xl"},"مدت زمان دوره : ",-1)),e("div",{class:o(["text-lg md:text-2xl font-bold text-blue-600",{"skeleton w-72 p-3":!l.value}])},d(k.value),3)]),e("div",He,[t[13]||(t[13]=e("div",{class:"text-gray-600 text-lg md:text-xl"},"قیمت دوره : ",-1)),e("div",{class:o(["text-lg md:text-2xl font-bold text-blue-600",{"skeleton w-72 p-3":!l.value}])},[l.value?(i(),a("span",Ne,d(l.value?.show_price==="0"?"رایگان":l.value?.show_price+" تومان"),1)):w("",!0)],2)]),e("div",null,[t[14]||(t[14]=e("div",{class:"text-gray-500"},"خلاصه‌ی این دوره:",-1)),e("p",{class:o(["pr-0 md:pr-4 text-md md:text-lg text-gray-600",{"skeleton w-full p-5":!l.value}]),id:"course-summary"},d(l.value?.small_description),3)])]),e("div",Re,[e("button",{onClick:t[0]||(t[0]=n=>V()),class:"btn btn-primary btn-lg flex-1 p-2","aria-label":`ثبت نام در دوره ${l.value?.title}`},[t[15]||(t[15]=y(" خرید دوره و مشاهده ",-1)),b(I(de),{class:"size-6 inline-block mr-2 text-teal-100"})],8,We),e("a",{onClick:t[1]||(t[1]=ee(n=>R("episodes"),["prevent"])),class:"btn btn-outline btn-lg opacity-70",href:"#episodes"},"مشاهده سرفصل‌ها")])])])])]),e("section",Ae,[t[16]||(t[16]=e("h2",{id:"desc-heading",class:"text-xl md:text-2xl font-bold text-gray-800 mb-4 pb-3 border-b-2 border-gray-200"}," توضیحات دوره",-1)),l.value?(i(),a("div",{key:0,innerHTML:l.value?.description,class:"text-gray-700 leading-relaxed prose xl:prose-lg 2xl:prose-xl text-justify max-w-none"},null,8,Ue)):(i(),a("div",Ze,[e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2),e("div",{class:o({"skeleton w-full p-4":!l.value})},null,2)]))]),e("section",qe,[t[17]||(t[17]=e("h2",{id:"episodes-heading",class:"text-xl md:text-2xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-gray-200"},"سرفصل‌های دوره",-1)),e("div",Fe,[(i(!0),a(te,null,se(g.value,(n,c)=>(i(),a("article",{class:"relative",key:n.id,"aria-posinset":c+1,"aria-setsize":g.value.length},[b(r,{to:{name:"show_episode",params:{course_link:l.value.link,episode_link:n.link}},class:"block border border-gray-200 rounded-lg overflow-hidden transition-all duration-300 shadow hover:shadow-md hover:border-blue-300 bg-gray-50/50 hover:bg-gray-50","aria-label":`مشاهده قسمت ${c+1} - ${n.title}`},{default:z(()=>[e("div",Ge,[e("div",Ke,[c>0?(i(),a("span",Qe,d(c),1)):(i(),a("span",Xe,"مقدمه"))]),e("div",Ye,[c>0?(i(),a("div",et,d(c),1)):(i(),a("span",tt,"مقدمه"))]),e("div",st,[e("h3",lt,d(n.title),1),e("p",ot,d(n.small_description),1)]),e("div",at,[e("span",{class:o([Z(n.display_status),"text-xs font-medium px-3 py-1 rounded-full"])},d(q(n.display_status)),3)]),e("div",it,[e("div",rt,[b(I(ue),{class:"size-10"})])])])]),_:2},1032,["to","aria-label"])],8,Je))),128))])]),t[21]||(t[21]=e("section",{class:"bg-white rounded-xl shadow-lg p-6 mt-8","aria-labelledby":"requirements-heading"},[e("h2",{id:"requirements-heading",class:"text-xl md:text-2xl font-bold text-gray-800 mb-4 pb-3 border-b-2 border-gray-200"},"پیش‌نیازهای دوره"),e("ul",{class:"space-y-3 text-gray-700",role:"list"},[e("li",{class:"flex items-start"},[e("i",{class:"fas fa-check-circle text-green-500 mt-1 ml-3 text-lg","aria-hidden":"true"}),e("span",{class:"leading-relaxed"},"آشنایی مقدماتی با مفاهیم برنامه‌نویسی")]),e("li",{class:"flex items-start"},[e("i",{class:"fas fa-check-circle text-green-500 mt-1 ml-3 text-lg","aria-hidden":"true"}),e("span",{class:"leading-relaxed"},"داشتن کامپیوتر شخصی")]),e("li",{class:"flex items-start"},[e("i",{class:"fas fa-check-circle text-green-500 mt-1 ml-3 text-lg","aria-hidden":"true"}),e("span",{class:"leading-relaxed"},"انگیزه و پشتکار برای یادگیری")])])],-1)),e("section",nt,[t[20]||(t[20]=e("h2",{id:"instructor-heading",class:"text-xl md:text-2xl font-bold text-gray-800 mb-4 pb-3 border-b-2 border-gray-200"},"مدرس دوره",-1)),e("div",dt,[e("div",ct,[t[18]||(t[18]=e("div",{class:"w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center ml-4 shadow-lg","aria-hidden":"true"},[e("i",{class:"fas fa-user text-white text-2xl"})],-1)),e("div",null,[e("h3",ut,d(v.value.name),1),e("p",pt,d(v.value.title),1)])]),v.value?.slug?(i(),a("div",mt,[b(r,{to:{name:"author_info",params:{slug:v.value?.slug}},class:"btn btn-primary"},{default:z(()=>[...t[19]||(t[19]=[y("مشاهده اطلاعات مدرس",-1)])]),_:1},8,["to"])])):w("",!0)])])]))])}}},wt=Q(ht,[["__scopeId","data-v-5d9688b8"]]);export{wt as default};
