import{r as v,b as w,c as r,o as n,d as t,e as x,l as b,k as y,F as k,g as C,t as c,A as f,m as E,D as B,E as j}from"./index-Batg2TJ2.js";import{S as i}from"./sweetalert2.esm.all-NNS-RXd7.js";const F={class:"bg-base-200 min-h-dvh"},M={class:"container mx-auto p-4 max-w-6xl"},L={key:0,class:"flex justify-center items-center h-64"},N={key:1,class:"card bg-base-100 shadow-xl"},P={class:"card-body text-center py-16"},S={key:2,class:"grid lg:grid-cols-3 gap-6"},T={class:"lg:col-span-2"},D={class:"space-y-4"},R={class:"card-body p-4"},V={class:"flex flex-col sm:flex-row gap-4"},z={class:"avatar"},A={class:"w-24 h-24 rounded-lg overflow-hidden"},H=["src","alt"],I={class:"flex-grow"},$={class:"card-title text-lg"},G={class:"mt-2"},U={class:"text-2xl font-bold text-primary"},q={class:"flex flex-col justify-center"},J=["onClick"],K={class:"lg:col-span-1"},O={class:"card bg-base-100 shadow-md sticky top-4"},Q={class:"card-body"},W={class:"space-y-2"},X={class:"flex justify-between"},Y={class:"flex justify-between font-bold text-lg"},Z={class:"card-actions justify-end mt-6"},tt=["disabled"],st={key:0},et={key:1,class:"loading loading-spinner loading-sm"},it={__name:"Cart",setup(ot){const l=v([]),d=v(!0),a=v(!1),g=async()=>{try{d.value=!0;const e=await f("site/active-user/course-shopping/cart-list");if(e.ok)l.value=e.list;else throw new Error("Failed to fetch cart items")}catch(e){console.error("Error fetching cart:",e),i.fire({icon:"error",title:"Error",text:"مشکلی روی داده است لطفا بعدا تلاش کنید و یا با پشتیبانی تماس بگیرید"})}finally{d.value=!1}},_=async e=>{try{if((await i.fire({title:"حذف از سبد خرید",text:"می‌خواهید دوره را از سبد خرید حذف کنید؟",icon:"warning",showCancelButton:!0,cancelButtonText:"لغو",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"بله حذف کن"})).isConfirmed)if((await f(`site/active-user/course-shopping/remove-from-cart/${e}`)).ok)l.value=l.value.filter(o=>o.id!==e),i.fire("حذف شد","همون طور که خواستی دوره از سبد خرید حذف شد","success");else throw new Error("Failed to remove item")}catch(s){console.error("Error removing item:",s),i.fire({icon:"error",title:"Error",text:"مشکلی روی داده است لطفا بعدا تلاش کنید و یا با پشتیبانی تماس بگیرید"})}},h=async()=>{try{a.value=!0;const e=await f("site/active-user/course-shopping/get-gateway-link");if(e.ok&&e.link)window.location.href=e.link;else throw new Error(e?.error||"Failed to get payment link")}catch(e){console.error("Error getting payment link:",e),i.fire({icon:"error",title:"Error",text:e||"مشکلی روی داده است لطفا بعدا تلاش کنید و یا با پشتیبانی تماس بگیرید"})}finally{a.value=!1}},m=()=>l.value.reduce((e,s)=>e+s.price,0),u=e=>new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(e);return w(()=>{g()}),(e,s)=>{const p=y("router-link");return n(),r("div",F,[t("div",M,[s[11]||(s[11]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-center mb-2"},"سبد خرید"),t("div",{class:"divider"})],-1)),d.value?(n(),r("div",L,[...s[0]||(s[0]=[t("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):l.value.length===0?(n(),r("div",N,[t("div",P,[s[2]||(s[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-24 w-24 mx-auto mb-4 text-base-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),s[3]||(s[3]=t("h2",{class:"text-2xl font-semibold mb-2"},"سبد خرید شما خالی است",-1)),s[4]||(s[4]=t("p",{class:"text-base-content/70 mb-6"},"با کلیک روی دکمه زیر می‌توانی دوره‌ها را مشاهده و به سبد خرید خود اضافه کنید",-1)),x(p,{to:"/courses",class:"btn btn-primary"},{default:b(()=>[...s[1]||(s[1]=[E("مشاهده‌ی دوره های نیتروکد",-1)])]),_:1})])])):(n(),r("div",S,[t("div",T,[t("div",D,[(n(!0),r(k,null,C(l.value,o=>(n(),r("div",{key:o.id,class:"card bg-base-100 shadow-md"},[t("div",R,[t("div",V,[t("div",z,[t("div",A,[t("img",{src:B(j)()+o.image,alt:o.title,class:"object-cover w-full h-full"},null,8,H)])]),t("div",I,[t("h3",$,c(o.title),1),t("div",G,[t("span",U,c(u(o.price)),1)])]),t("div",q,[t("button",{onClick:rt=>_(o.id),class:"btn btn-sm btn-circle btn-outline btn-error"},[...s[5]||(s[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,J)])])])]))),128))])]),t("div",K,[t("div",O,[t("div",Q,[s[10]||(s[10]=t("h2",{class:"card-title text-xl mb-4"},"خلاصه سفارش",-1)),t("div",W,[t("div",X,[s[6]||(s[6]=t("span",null,"قابل پرداخت",-1)),t("span",null,c(u(m())),1)]),s[8]||(s[8]=t("div",{class:"flex justify-between"},[t("span",null,"مالیات"),t("span",null,"به مبلغ نهایی ۱۰ درصد مالیات بر ارزش افزوده اضافه می‌گردد")],-1)),s[9]||(s[9]=t("div",{class:"divider my-2"},null,-1)),t("div",Y,[s[7]||(s[7]=t("span",null,"مجموع",-1)),t("span",null,c(u(m())),1)])]),t("div",Z,[t("button",{onClick:h,class:"btn btn-primary w-full",disabled:a.value},[a.value?(n(),r("span",et)):(n(),r("span",st,"Proceed to Checkout"))],8,tt)])])])])]))])])}}};export{it as default};
