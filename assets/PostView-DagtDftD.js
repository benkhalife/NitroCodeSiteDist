var ee=Object.defineProperty,te=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var O=(m,r,d)=>r in m?ee(m,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):m[r]=d,J=(m,r)=>{for(var d in r||(r={}))ae.call(r,d)&&O(m,d,r[d]);if(V)for(var d of V(r))le.call(r,d)&&O(m,d,r[d]);return m},R=(m,r)=>te(m,se(r));import{r as g,h as _,b as oe,w as ne,x as ie,c as n,o as i,d as t,H as w,t as c,f as v,F as C,g as M,l as W,D as k,k as h,J as A,K as re,P as F,i as de,s as ue,G as H,j as ce}from"./index-qH-XIRx2.js";import{S as N}from"./sweetalert2.esm.all-IjpX9IMJ.js";const me={class:"min-h-screen bg-gray-50"},pe={class:"container mx-auto p-1 sm:px-4 py-4 sm:py-8 max-w-4xl"},ge={"aria-label":"Breadcrumb",class:"breadcrumbs text-primary text-sm mt-4 pr-4",dir:"rtl"},fe={itemscope:"",itemtype:"https://schema.org/BreadcrumbList"},ve={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem",class:"text-gray-700"},he={itemprop:"name"},be={id:"main-content",role:"main",tabindex:"-1"},xe={key:0,class:"bg-white rounded-xl shadow-md overflow-hidden","aria-busy":"true"},ye={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",role:"alert","aria-live":"assertive"},_e={class:"flex items-center"},we={class:"text-red-700"},ke={key:2,id:"main-page-content",class:"bg-white rounded-xl shadow-md overflow-hidden"},Le={class:"relative"},Ee=["src","alt"],$e={class:"backdrop-blur-xs absolute bottom-0 left-0 right-0 p-2 sm:p-6 text-white"},Ie={id:"post-title",class:"text-xl sm:text-2xl md:text-3xl font-bold mb-2"},Pe={class:"flex flex-wrap gap-4 text-sm","aria-hidden":"false"},Te={class:"flex items-center gap-1"},Se=["datetime"],Ce={class:"flex items-center gap-1"},Me={key:0,class:"flex items-center gap-1"},Ae=["datetime","aria-label"],De={class:"p-2 sm:p-4 md:p-8"},je={key:0,class:"mx-auto max-w-2xl bg-base-200/50 p-4 rounded-xl mt-6","aria-labelledby":"audio-caption"},qe={class:"flex flex-col gap-3"},Be={id:"audio-caption"},Ue={class:"text-lg font-semibold text-primary flex items-center gap-2"},Ve=["aria-label"],Oe=["src"],Je=["src"],Re=["src"],We=["innerHTML"],Fe={class:"mt-10 pt-6 border-t border-gray-200 flex flex-col sm:flex-row justify-between gap-4"},He=["aria-label"],Ne=["aria-label"],ze={class:"mt-12"},Ge={class:"bg-white rounded-xl shadow-md p-6 mb-8"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ye={class:"mb-4"},Qe=["disabled"],Xe={key:0,class:"loading loading-spinner"},Ze={key:0,class:"mt-4 text-sm text-green-600",role:"status","aria-live":"polite"},et={key:0,class:"space-y-6"},tt={class:"flex justify-between items-start mb-3"},st={class:"flex items-center"},at={class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold","aria-hidden":"true"},lt={class:"mr-3"},ot={class:"font-semibold text-gray-800"},nt={class:"text-gray-500 text-sm"},it={class:"flex items-center text-yellow-400","aria-hidden":"true"},rt={class:"text-gray-700"},dt={key:1,class:"bg-gray-100 rounded-xl p-8 text-center"},pt={__name:"PostView",setup(m){const r=de(),d=ce(),p=g([]),a=g(null),L=g(!1),b=g(null),D=g(!1),x=g(!1),f=g({name:"",email:"",text:""}),j=g([]),E=g(""),q=async()=>{L.value=!0,b.value=null;try{const s=await F(`site/post/${r.params.link}`);if(s.ok&&s.post){a.value=s.post,G(s.post),await ue(),z();const e=document.getElementById("main-content");e&&e.focus()}else b.value="Ù¾Ø³Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯"}catch(s){b.value="Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø³Øª",console.error(s)}finally{L.value=!1}},z=()=>{try{const s=document.getElementById("post-content");if(!s)return;Array.from(s.querySelectorAll("a")).forEach(o=>{if(o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer nofollow"),!o.getAttribute("aria-label")){const l=(o.textContent||"").trim();l.length>0&&o.setAttribute("aria-label",`Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù„ÛŒÙ†Ú©: ${l}`)}})}catch(s){console.warn("processDescriptionLinks error",s)}},G=s=>{document.title=s.meta_title||s.title||document.title;const e=s.meta_description||s.small_description||"",o=s.meta_keywords||"Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ, ØªÙˆØ³Ø¹Ù‡ Ø¨Ø§Ø²ÛŒ, Ø¢Ù…ÙˆØ²Ø´";u("name","description",e),u("name","keywords",o),u("name","robots",s.meta_robots||"index,follow"),K(s.meta_canonical),u("property","og:type","article"),u("property","og:title",s.meta_title||s.title),u("property","og:description",e),u("property","og:url",s.meta_canonical||window.location.href),u("property","og:image",y()),u("name","twitter:card","summary_large_image"),u("name","twitter:title",s.meta_title||s.title),u("name","twitter:description",e),u("name","twitter:image",y());const l={"@context":"https://schema.org","@type":"Article",headline:s.meta_title||s.title,description:e,image:[y()],datePublished:k(s.created_at,"+03:30"),dateModified:k(s.updated_at,"+03:30"),mainEntityOfPage:{"@type":"WebPage","@id":s.meta_canonical||window.location.href},author:{"@type":"Person",name:"Ø¨Ù†ÛŒØ§Ù…ÛŒÙ† Ø®Ù„ÛŒÙÙ‡",url:"https://nitrocode.ir/authors/benyamin-khalife"}};Y(l)},u=(s,e,o)=>{if(!o&&o!=="")return;let l=document.querySelector(`meta[${s}='${e}']`);l||(l=document.createElement("meta"),l.setAttribute(s,e),document.head.appendChild(l)),l.content=o},K=s=>{let e=document.querySelector('link[rel="canonical"]');e||(e=document.createElement("link"),e.rel="canonical",document.head.appendChild(e)),e.href=s},Y=s=>{try{const e=document.head.querySelector('script[type="application/ld+json"][data-generated="nitrocode"]');e&&e.remove();const o=document.createElement("script");o.type="application/ld+json",o.setAttribute("data-generated","nitrocode"),o.text=JSON.stringify(s),document.head.appendChild(o)}catch(e){console.warn("insertJsonLD error",e)}},Q=_(()=>{if(!a.value)return 0;const s=(a.value.description||"").replace(/<[^>]*>/g,""),e=200,o=s.trim()===""?0:s.trim().split(/\s+/).length;return Math.max(1,Math.ceil(o/e))});_(()=>!a.value||p.value.length===0?[]:[...p.value.filter(o=>o.id!==a.value.id)].sort(()=>.5-Math.random()).slice(0,3));const $=_(()=>{if(!a.value||p.value.length===0)return null;const s=p.value.findIndex(e=>e.id===a.value.id);return s<=0?null:p.value[s-1]}),I=_(()=>{if(!a.value||p.value.length===0)return null;const s=p.value.findIndex(e=>e.id===a.value.id);return s===-1||s>=p.value.length-1?null:p.value[s+1]}),B=s=>{d.push(`/posts/${s}`),window.scrollTo(0,0)},P=s=>{if(!s)return"";const e={year:"numeric",month:"long",day:"numeric"};try{return new Date(s).toLocaleDateString("fa-IR",e)}catch(o){return s}},y=()=>{var s;return`${H()}${(s=a==null?void 0:a.value)==null?void 0:s.image}`},T=s=>H()+`files/posts/${a.value.id}/${s}`,X=()=>{x.value=!0,F("site/post-comment/new",{content:R(J({},f.value),{link:`https://nitrocode.ir/${r.fullPath.substring(1)}`})}).then(s=>{console.log(s),s.ok?N.fire({title:"Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø´Ù…Ø§  ğŸ¤©",text:s.message,icon:"success"}).then(()=>{f.value={name:"",email:"",text:""},E.value="Ù†Ø¸Ø± Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯."}):N.fire({text:s.message,icon:"error"})}).finally(()=>{x.value=!1})},Z=()=>{window.scrollTo({top:0,behavior:"smooth"})},U=()=>{D.value=window.scrollY>300};return oe(()=>{q(),window.addEventListener("scroll",U)}),ne(()=>r.params.link,async(s,e)=>{s&&s!==e&&await q()}),ie(()=>{window.removeEventListener("scroll",U)}),(s,e)=>{var o;return i(),n("div",me,[t("div",pe,[t("nav",ge,[t("ul",fe,[e[7]||(e[7]=t("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[t("a",{itemprop:"item",href:"/"},[t("span",{itemprop:"name"},"ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ")]),t("meta",{itemprop:"position",content:"1"})],-1)),e[8]||(e[8]=t("li",{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},[t("a",{itemprop:"item",href:"/posts"},[t("span",{itemprop:"name"},"Ù…Ø·Ø§Ù„Ø¨")]),t("meta",{itemprop:"position",content:"2"})],-1)),t("li",ve,[t("span",he,c((o=a.value)==null?void 0:o.title),1),e[6]||(e[6]=t("meta",{itemprop:"position",content:"3"},null,-1))])])]),t("div",be,[L.value?(i(),n("div",xe,[e[10]||(e[10]=t("div",{class:"h-64 skeleton","aria-hidden":"true"},null,-1)),(i(!0),n(C,null,M(Array.from({length:7},(l,S)=>S),l=>(i(),n("div",{key:l,class:"p-6"},[...e[9]||(e[9]=[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4 skeleton","aria-hidden":"true"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton","aria-hidden":"true"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton","aria-hidden":"true"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded mb-2 skeleton","aria-hidden":"true"},null,-1)])]))),128))])):b.value?(i(),n("div",ye,[t("div",_e,[e[11]||(e[11]=t("i",{class:"fas fa-exclamation-triangle text-red-500 text-xl ml-3","aria-hidden":"true"},null,-1)),t("p",we,c(b.value),1)])])):a.value?(i(),n("article",ke,[t("header",Le,[t("img",{src:y(),alt:a.value.title,class:"w-full h-80 md:h-128 object-cover",loading:"lazy",onError:e[0]||(e[0]=(...l)=>s.handleImageError&&s.handleImageError(...l))},null,40,Ee),e[15]||(e[15]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent","aria-hidden":"true"},null,-1)),t("div",$e,[t("h1",Ie,c(a.value.title),1),t("div",Pe,[t("span",Te,[e[12]||(e[12]=t("i",{class:"far fa-calendar","aria-hidden":"true"},null,-1)),t("time",{datetime:W(k)(a.value.created_at,"+03:30")},c(P(a.value.created_at)),9,Se)]),t("span",Ce,[e[13]||(e[13]=t("i",{class:"far fa-clock","aria-hidden":"true"},null,-1)),t("span",null,c(Q.value)+" Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡",1)]),a.value.updated_at!=a.value.created_at?(i(),n("span",Me,[e[14]||(e[14]=t("span",{class:"whitespace-nowrap"},"Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ",-1)),t("time",{datetime:W(k)(a.value.updated_at,"+03:30"),"aria-label":`ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${P(a.value.updated_at)}`},c(P(a.value.updated_at)),9,Ae)])):v("",!0)])])]),t("div",De,[a.value.audio&&a.value.audio.trim()!==""?(i(),n("section",je,[t("figure",qe,[t("figcaption",Be,[t("h2",Ue,[e[16]||(e[16]=t("span",null,"ğŸ§",-1)),h(" Ø´Ù†ÛŒØ¯Ù† ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ: "+c(a.value.title),1)])]),t("audio",{class:"audio w-full",controls:"",preload:"metadata",crossorigin:"anonymous","aria-label":`Ù¾Ø®Ø´ ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ø¨Ø±Ø§ÛŒ ${a.value.title}`},[a.value.audio.endsWith(".mp3")?(i(),n("source",{key:0,src:T(a.value.audio),type:"audio/mpeg"},null,8,Oe)):a.value.audio.endsWith(".m4a")?(i(),n("source",{key:1,src:T(a.value.audio),type:"audio/mp4"},null,8,Je)):(i(),n("source",{key:2,src:T(a.value.audio),type:"audio/mpeg"},null,8,Re)),e[17]||(e[17]=h(" Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² ØªÚ¯ ØµÙˆØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ",-1))],8,Ve)])])):v("",!0),t("div",{id:"post-content",class:"prose xl:prose-lg 2xl:prose-xl mt-2 max-w-none text-gray-700 text-justify",innerHTML:a.value.description},null,8,We),t("div",Fe,[$.value?(i(),n("button",{key:0,onClick:e[1]||(e[1]=l=>B($.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors","aria-label":`Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø·Ù„Ø¨ Ù‚Ø¨Ù„ÛŒ: ${$.value.title}`},[...e[18]||(e[18]=[t("i",{class:"fas fa-arrow-right","aria-hidden":"true"},null,-1),h(" Ù…Ø·Ù„Ø¨ Ù‚Ø¨Ù„ÛŒ ",-1)])],8,He)):v("",!0),I.value?(i(),n("button",{key:1,onClick:e[2]||(e[2]=l=>B(I.value.link)),class:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors","aria-label":`Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ÛŒ: ${I.value.title}`},[...e[19]||(e[19]=[h(" Ù…Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ÛŒ ",-1),t("i",{class:"fas fa-arrow-left","aria-hidden":"true"},null,-1)])],8,Ne)):v("",!0)])])])):v("",!0),t("div",ze,[e[26]||(e[26]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 relative pb-3"},[h("Ù†Ø¸Ø±Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† "),t("span",{class:"absolute bottom-0 right-0 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full","aria-hidden":"true"})],-1)),t("div",Ge,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±",-1)),t("div",null,[t("div",Ke,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-gray-700 mb-2"},"Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>f.value.name=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,f.value.name]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-gray-700 mb-2"},"Ø§ÛŒÙ…ÛŒÙ„",-1)),w(t("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=l=>f.value.email=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,f.value.email]])])]),t("div",Ye,[e[22]||(e[22]=t("label",{class:"block text-gray-700 mb-2"},"Ù…ØªÙ† Ù†Ø¸Ø±",-1)),w(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>f.value.text=l),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,f.value.text]])]),t("button",{onClick:X,disabled:x.value,class:"btn btn-primary","aria-label":"Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±"},[e[23]||(e[23]=h(" Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø± ",-1)),x.value?(i(),n("span",Xe)):v("",!0)],8,Qe)]),E.value?(i(),n("div",Ze,c(E.value),1)):v("",!0)]),j.value.length>0?(i(),n("div",et,[(i(!0),n(C,null,M(j.value,l=>(i(),n("div",{key:l.id,class:"bg-white rounded-xl shadow-md p-6"},[t("div",tt,[t("div",st,[t("div",at,c(l.name.charAt(0)),1),t("div",lt,[t("h4",ot,c(l.name),1),t("p",nt,c(l.date),1)])]),t("div",it,[(i(),n(C,null,M(5,S=>t("i",{key:S,class:"fas fa-star"})),64))])]),t("p",rt,c(l.text),1)]))),128))])):(i(),n("div",dt,[...e[25]||(e[25]=[t("i",{class:"fas fa-comments text-gray-400 text-4xl mb-4","aria-hidden":"true"},null,-1),t("p",{class:"text-gray-600"},"Ù‡Ù†ÙˆØ² Ù†Ø¸Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÙˆÙ„ÛŒÙ† Ù†ÙØ± Ø¨Ø§Ø´ÛŒØ¯!",-1)])]))])])]),w(t("button",{onClick:Z,class:"fixed bottom-6 left-6 w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-110 z-50","aria-label":"Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§"},[...e[27]||(e[27]=[t("i",{class:"fas fa-arrow-up","aria-hidden":"true"},null,-1)])],512),[[re,D.value]])])}}};export{pt as default};
