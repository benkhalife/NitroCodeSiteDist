import{_ as h,r as i,h as _,c as o,o as r,d as t,n as p,m as a,z as C,f as c,y as g,A as x,t as V,e as M,l as S,k as z,j as B}from"./index-Bqb5IedX.js";const N={class:"min-h-screen flex items-center justify-center bg-gray-100 p-4"},T={class:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden"},j={class:"flex rounded-lg bg-gray-100 p-1 m-6"},D={key:0,class:"mb-4"},F={class:"relative"},P={key:1,class:"mb-4"},q={class:"relative"},A=["disabled"],U={key:0,class:"flex items-center justify-center"},$={key:1},E={key:2,class:"mt-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg"},H={class:"flex items-center"},I={key:0},R={key:1},G={key:3,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},J={class:"flex items-center"},K={class:"mt-6 text-center"},L={class:"text-sm text-gray-600"},O={__name:"ForgotPassword",setup(Q){const y=B(),l=i("mobile"),u=i(""),d=i(""),n=i(!1),b=i(!1),m=i(""),f=_(()=>l.value==="mobile"?u.value.trim()!=="":d.value.trim()!==""),w=async()=>{if(!(!f.value||n.value)){m.value="",b.value=!1;try{n.value=!0;const s={method:l.value};l.value==="mobile"?s.mobile=u.value:s.email=d.value,console.log("داده‌های ارسالی به سرور:",s),await new Promise(e=>setTimeout(e,1500)),b.value=!0,u.value="",d.value="",setTimeout(()=>{y.push("/login")},5e3)}catch(s){console.error("خطا در بازیابی رمز عبور:",s),s.response&&s.response.data&&s.response.data.message?m.value=s.response.data.message:m.value="خطایی در ارسال درخواست رخ داد. لطفاً دوباره تلاش کنید."}finally{n.value=!1}}};return(s,e)=>{const k=z("router-link");return r(),o("div",N,[t("div",T,[e[17]||(e[17]=t("div",{class:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-center"},[t("h1",{class:"text-2xl font-bold text-white"},"فراموشی رمز عبور"),t("p",{class:"text-blue-100 mt-2"},"برای بازیابی رمز عبور، اطلاعات خود را وارد کنید")],-1)),t("div",j,[t("button",{onClick:e[0]||(e[0]=v=>l.value="mobile"),class:p(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors",l.value==="mobile"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-200"])},[...e[4]||(e[4]=[t("i",{class:"fas fa-mobile-alt ml-2"},null,-1),a(" شماره موبایل ",-1)])],2),t("button",{onClick:e[1]||(e[1]=v=>l.value="email"),class:p(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors",l.value==="email"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-200"])},[...e[5]||(e[5]=[t("i",{class:"fas fa-envelope ml-2"},null,-1),a(" ایمیل ",-1)])],2)]),t("form",{onSubmit:C(w,["prevent"]),class:"px-6 pb-6"},[l.value==="mobile"?(r(),o("div",D,[e[7]||(e[7]=t("label",{for:"mobile",class:"block text-gray-700 text-sm font-medium mb-2"}," شماره موبایل ",-1)),t("div",F,[e[6]||(e[6]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("i",{class:"fas fa-mobile-alt text-gray-400"})],-1)),g(t("input",{type:"tel",id:"mobile","onUpdate:modelValue":e[2]||(e[2]=v=>u.value=v),class:"w-full pr-10 pl-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"شماره موبایل خود را وارد کنید",required:""},null,512),[[x,u.value]])])])):(r(),o("div",P,[e[9]||(e[9]=t("label",{for:"email",class:"block text-gray-700 text-sm font-medium mb-2"}," ایمیل ",-1)),t("div",q,[e[8]||(e[8]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("i",{class:"fas fa-envelope text-gray-400"})],-1)),g(t("input",{type:"email",id:"email","onUpdate:modelValue":e[3]||(e[3]=v=>d.value=v),class:"w-full pr-10 pl-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ایمیل خود را وارد کنید",required:""},null,512),[[x,d.value]])])])),t("button",{type:"submit",disabled:!f.value||n.value,class:p(["w-full font-medium py-3 px-4 rounded-lg transition duration-300",f.value&&!n.value?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[n.value?(r(),o("span",U,[...e[10]||(e[10]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a(" در حال ارسال... ",-1)])])):(r(),o("span",$,"ارسال لینک بازیابی"))],10,A),b.value?(r(),o("div",E,[t("div",H,[e[13]||(e[13]=t("i",{class:"fas fa-check-circle ml-2"},null,-1)),t("p",null,[e[11]||(e[11]=a(" لینک بازیابی رمز عبور به ",-1)),l.value==="mobile"?(r(),o("span",I,"شماره موبایل شما")):(r(),o("span",R,"ایمیل شما")),e[12]||(e[12]=a(" ارسال شد. ",-1))])])])):c("",!0),m.value?(r(),o("div",G,[t("div",J,[e[14]||(e[14]=t("i",{class:"fas fa-exclamation-circle ml-2"},null,-1)),t("p",null,V(m.value),1)])])):c("",!0),t("div",K,[t("p",L,[e[16]||(e[16]=a(" به حساب کاربری خود برگشتید؟ ",-1)),M(k,{to:"/login",class:"text-blue-600 hover:text-blue-800 font-medium"},{default:S(()=>[...e[15]||(e[15]=[a(" وارد شوید ",-1)])]),_:1})])])],32)])])}}},X=h(O,[["__scopeId","data-v-7512f4db"]]);export{X as default};
